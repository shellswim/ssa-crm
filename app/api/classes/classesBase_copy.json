{
  "meta": {
    "$_GET": [
      {
        "type": "text",
        "name": "sort"
      },
      {
        "type": "text",
        "name": "dir"
      },
      {
        "type": "text",
        "name": "offset"
      },
      {
        "type": "text",
        "name": "limit"
      },
      {
        "type": "text",
        "name": "classid"
      },
      {
        "type": "array",
        "name": "days"
      },
      {
        "type": "array",
        "name": "times"
      },
      {
        "type": "array",
        "name": "levels"
      },
      {
        "type": "array",
        "name": "instructors"
      },
      {
        "type": "date",
        "name": "startdate"
      },
      {
        "type": "date",
        "name": "enddate"
      }
    ]
  },
  "exec": {
    "steps": [
      {
        "name": "classdump",
        "module": "dbconnector",
        "action": "paged",
        "options": {
          "connection": "db",
          "sql": {
            "type": "SELECT",
            "columns": [],
            "table": {
              "name": "allClasses_detail"
            },
            "joins": [],
            "query": "SELECT *\nFROM allClasses_detail\nORDER BY day_int ASC, startTimeDecimal ASC, instructor_firstname ASC",
            "params": [],
            "orders": [
              {
                "table": "allClasses_detail",
                "column": "day_int",
                "direction": "ASC"
              },
              {
                "table": "allClasses_detail",
                "column": "startTimeDecimal",
                "direction": "ASC"
              },
              {
                "table": "allClasses_detail",
                "column": "instructor_firstname",
                "direction": "ASC"
              }
            ]
          }
        },
        "output": false,
        "meta": [
          {
            "name": "offset",
            "type": "number"
          },
          {
            "name": "limit",
            "type": "number"
          },
          {
            "name": "total",
            "type": "number"
          },
          {
            "name": "page",
            "type": "object",
            "sub": [
              {
                "name": "offset",
                "type": "object",
                "sub": [
                  {
                    "name": "first",
                    "type": "number"
                  },
                  {
                    "name": "prev",
                    "type": "number"
                  },
                  {
                    "name": "next",
                    "type": "number"
                  },
                  {
                    "name": "last",
                    "type": "number"
                  }
                ]
              },
              {
                "name": "current",
                "type": "number"
              },
              {
                "name": "total",
                "type": "number"
              }
            ]
          },
          {
            "name": "data",
            "type": "array",
            "sub": [
              {
                "type": "number",
                "name": "id"
              },
              {
                "type": "number",
                "name": "classLevel"
              },
              {
                "type": "text",
                "name": "day_name"
              },
              {
                "type": "number",
                "name": "day_int"
              },
              {
                "type": "date",
                "name": "startdate"
              },
              {
                "type": "date",
                "name": "enddate"
              },
              {
                "type": "number",
                "name": "classType"
              },
              {
                "type": "text",
                "name": "startTimeDisplay"
              },
              {
                "type": "number",
                "name": "startTimeDecimal"
              },
              {
                "type": "text",
                "name": "endTimeDisplay"
              },
              {
                "type": "number",
                "name": "endTimeDecimal"
              },
              {
                "type": "number",
                "name": "max"
              },
              {
                "type": "text",
                "name": "instructor_firstname"
              },
              {
                "type": "text",
                "name": "instructor_lastname"
              },
              {
                "type": "number",
                "name": "instructorid"
              },
              {
                "type": "number",
                "name": "enrolcount"
              },
              {
                "type": "number",
                "name": "enrol_active"
              },
              {
                "type": "number",
                "name": "enrol_makeup"
              },
              {
                "type": "number",
                "name": "enrol_trial"
              },
              {
                "type": "number",
                "name": "enrol_waitlist"
              },
              {
                "type": "number",
                "name": "enrol_casual"
              },
              {
                "type": "number",
                "name": "slots_avail"
              }
            ]
          }
        ],
        "outputType": "object",
        "type": "dbconnector_paged_select"
      },
      {
        "name": "page",
        "module": "core",
        "action": "setvalue",
        "options": {
          "value": {
            "limit": "{{classdump.limit}}",
            "total": "{{classdump.total}}",
            "offset": "{{classdump.offset}}",
            "page": "{{classdump.page}}"
          }
        },
        "meta": [],
        "outputType": "text",
        "output": true
      },
      {
        "name": "rp_enrols",
        "module": "core",
        "action": "repeat",
        "options": {
          "repeat": "{{classdump.data}}",
          "outputFields": [
            "id",
            "day_name",
            "day_int",
            "classLevel",
            "startdate",
            "enddate",
            "classType",
            "startTimeDisplay",
            "startTimeDecimal",
            "endTimeDisplay",
            "endTimeDecimal",
            "max",
            "instructor_firstname",
            "instructor_lastname",
            "instructorid",
            "enrolcount",
            "enrol_active",
            "enrol_makeup",
            "enrol_trial",
            "enrol_waitlist",
            "enrol_casual",
            "slots_avail"
          ],
          "exec": {
            "steps": [
              {
                "name": "active_enrols",
                "module": "dbconnector",
                "action": "select",
                "options": {
                  "connection": "db",
                  "sql": {
                    "type": "SELECT",
                    "columns": [
                      {
                        "table": "enrolments",
                        "column": "*"
                      },
                      {
                        "table": "students",
                        "column": "firstName"
                      },
                      {
                        "table": "students",
                        "column": "lastName"
                      },
                      {
                        "table": "students",
                        "column": "dob"
                      },
                      {
                        "table": "students",
                        "column": "family"
                      }
                    ],
                    "table": {
                      "name": "enrolments"
                    },
                    "joins": [
                      {
                        "table": "students",
                        "column": "*",
                        "type": "INNER",
                        "clauses": {
                          "condition": "AND",
                          "rules": [
                            {
                              "table": "students",
                              "column": "id",
                              "operator": "equal",
                              "value": {
                                "table": "enrolments",
                                "column": "student"
                              },
                              "operation": "="
                            }
                          ]
                        }
                      }
                    ],
                    "wheres": {
                      "condition": "AND",
                      "rules": [
                        {
                          "id": "enrolments.classId",
                          "field": "enrolments.classId",
                          "type": "double",
                          "operator": "equal",
                          "value": "{{id}}",
                          "data": {
                            "table": "enrolments",
                            "column": "classId",
                            "type": "number"
                          },
                          "operation": "="
                        },
                        {
                          "id": "enrolments.enrolmentType",
                          "field": "enrolments.enrolmentType",
                          "type": "double",
                          "operator": "equal",
                          "value": 1,
                          "data": {
                            "table": "enrolments",
                            "column": "enrolmentType",
                            "type": "number"
                          },
                          "operation": "="
                        },
                        {
                          "condition": "OR",
                          "rules": [
                            {
                              "id": "enrolments.dropDate",
                              "field": "enrolments.dropDate",
                              "type": "date",
                              "operator": "greater_or_equal",
                              "value": "{{$_GET.startdate.formatDate('yyyy-MM-dd')}}",
                              "data": {
                                "table": "enrolments",
                                "column": "dropDate",
                                "type": "date"
                              },
                              "operation": ">="
                            },
                            {
                              "id": "enrolments.dropDate",
                              "field": "enrolments.dropDate",
                              "type": "date",
                              "operator": "is_null",
                              "value": null,
                              "data": {
                                "table": "enrolments",
                                "column": "dropDate",
                                "type": "date"
                              },
                              "operation": "IS NULL"
                            }
                          ],
                          "conditional": null
                        },
                        {
                          "id": "enrolments.isValid",
                          "field": "enrolments.isValid",
                          "type": "boolean",
                          "operator": "equal",
                          "value": true,
                          "data": {
                            "table": "enrolments",
                            "column": "isValid",
                            "type": "boolean"
                          },
                          "operation": "="
                        }
                      ],
                      "conditional": null,
                      "valid": true
                    },
                    "query": "SELECT enrolments.*, students.firstName, students.lastName, students.dob, students.family\nFROM enrolments\nINNER JOIN students ON (students.id = enrolments.student)\nWHERE enrolments.classId = :P1 /* {{id}} */ AND enrolments.enrolmentType = 1 AND (enrolments.dropDate >= :P2 /* {{$_GET.startdate.formatDate('yyyy-MM-dd')}} */ OR enrolments.dropDate IS NULL) AND enrolments.isValid = true",
                    "params": [
                      {
                        "operator": "equal",
                        "type": "expression",
                        "name": ":P1",
                        "value": "{{id}}"
                      },
                      {
                        "operator": "greater_or_equal",
                        "type": "expression",
                        "name": ":P2",
                        "value": "{{$_GET.startdate.formatDate('yyyy-MM-dd')}}"
                      }
                    ],
                    "orders": []
                  }
                },
                "output": true,
                "meta": [
                  {
                    "type": "number",
                    "name": "id"
                  },
                  {
                    "type": "number",
                    "name": "enrolmentType"
                  },
                  {
                    "type": "date",
                    "name": "dropDate"
                  },
                  {
                    "type": "boolean",
                    "name": "isValid"
                  },
                  {
                    "type": "number",
                    "name": "student"
                  },
                  {
                    "type": "date",
                    "name": "startDate"
                  },
                  {
                    "type": "number",
                    "name": "classId"
                  },
                  {
                    "type": "text",
                    "name": "dropReason"
                  },
                  {
                    "type": "text",
                    "name": "firstName"
                  },
                  {
                    "type": "text",
                    "name": "lastName"
                  },
                  {
                    "type": "date",
                    "name": "dob"
                  },
                  {
                    "type": "number",
                    "name": "family"
                  }
                ],
                "outputType": "array"
              },
              {
                "name": "trial_enrols",
                "module": "dbconnector",
                "action": "select",
                "options": {
                  "connection": "db",
                  "sql": {
                    "type": "SELECT",
                    "columns": [
                      {
                        "table": "enrolments",
                        "column": "*"
                      },
                      {
                        "table": "students",
                        "column": "firstName"
                      },
                      {
                        "table": "students",
                        "column": "lastName"
                      },
                      {
                        "table": "students",
                        "column": "dob"
                      },
                      {
                        "table": "students",
                        "column": "family"
                      }
                    ],
                    "table": {
                      "name": "enrolments"
                    },
                    "joins": [
                      {
                        "table": "students",
                        "column": "*",
                        "type": "INNER",
                        "clauses": {
                          "condition": "AND",
                          "rules": [
                            {
                              "table": "students",
                              "column": "id",
                              "operator": "equal",
                              "value": {
                                "table": "enrolments",
                                "column": "student"
                              },
                              "operation": "="
                            }
                          ]
                        }
                      }
                    ],
                    "wheres": {
                      "condition": "AND",
                      "rules": [
                        {
                          "id": "enrolments.isValid",
                          "field": "enrolments.isValid",
                          "type": "boolean",
                          "operator": "equal",
                          "value": true,
                          "data": {
                            "table": "enrolments",
                            "column": "isValid",
                            "type": "boolean"
                          },
                          "operation": "="
                        },
                        {
                          "id": "enrolments.classId",
                          "field": "enrolments.classId",
                          "type": "double",
                          "operator": "equal",
                          "value": "{{id}}",
                          "data": {
                            "table": "enrolments",
                            "column": "classId",
                            "type": "number"
                          },
                          "operation": "="
                        },
                        {
                          "id": "enrolments.enrolmentType",
                          "field": "enrolments.enrolmentType",
                          "type": "double",
                          "operator": "equal",
                          "value": 3,
                          "data": {
                            "table": "enrolments",
                            "column": "enrolmentType",
                            "type": "number"
                          },
                          "operation": "="
                        },
                        {
                          "condition": "OR",
                          "rules": [
                            {
                              "id": "enrolments.dropDate",
                              "field": "enrolments.dropDate",
                              "type": "date",
                              "operator": "greater_or_equal",
                              "value": "{{$_GET.startdate.formatDate('yyyy-MM-dd')}}",
                              "data": {
                                "table": "enrolments",
                                "column": "dropDate",
                                "type": "date"
                              },
                              "operation": ">="
                            },
                            {
                              "id": "enrolments.dropDate",
                              "field": "enrolments.dropDate",
                              "type": "date",
                              "operator": "is_null",
                              "value": null,
                              "data": {
                                "table": "enrolments",
                                "column": "dropDate",
                                "type": "date"
                              },
                              "operation": "IS NULL"
                            }
                          ],
                          "conditional": null
                        }
                      ],
                      "conditional": null,
                      "valid": true
                    },
                    "query": "SELECT enrolments.*, students.firstName, students.lastName, students.dob, students.family\nFROM enrolments\nINNER JOIN students ON (students.id = enrolments.student)\nWHERE enrolments.isValid = true AND enrolments.classId = :P1 /* {{id}} */ AND enrolments.enrolmentType = 3 AND (enrolments.dropDate >= :P2 /* {{$_GET.startdate.formatDate('yyyy-MM-dd')}} */ OR enrolments.dropDate IS NULL)",
                    "params": [
                      {
                        "operator": "equal",
                        "type": "expression",
                        "name": ":P1",
                        "value": "{{id}}"
                      },
                      {
                        "operator": "greater_or_equal",
                        "type": "expression",
                        "name": ":P2",
                        "value": "{{$_GET.startdate.formatDate('yyyy-MM-dd')}}"
                      }
                    ],
                    "orders": []
                  }
                },
                "output": true,
                "meta": [
                  {
                    "type": "number",
                    "name": "id"
                  },
                  {
                    "type": "number",
                    "name": "enrolmentType"
                  },
                  {
                    "type": "date",
                    "name": "dropDate"
                  },
                  {
                    "type": "boolean",
                    "name": "isValid"
                  },
                  {
                    "type": "number",
                    "name": "student"
                  },
                  {
                    "type": "date",
                    "name": "startDate"
                  },
                  {
                    "type": "number",
                    "name": "classId"
                  },
                  {
                    "type": "text",
                    "name": "dropReason"
                  },
                  {
                    "type": "text",
                    "name": "firstName"
                  },
                  {
                    "type": "text",
                    "name": "lastName"
                  },
                  {
                    "type": "date",
                    "name": "dob"
                  },
                  {
                    "type": "number",
                    "name": "family"
                  }
                ],
                "outputType": "array"
              },
              {
                "name": "makeup_enrols",
                "module": "dbconnector",
                "action": "select",
                "options": {
                  "connection": "db",
                  "sql": {
                    "type": "SELECT",
                    "columns": [
                      {
                        "table": "enrolments",
                        "column": "*"
                      },
                      {
                        "table": "students",
                        "column": "firstName"
                      },
                      {
                        "table": "students",
                        "column": "lastName"
                      },
                      {
                        "table": "students",
                        "column": "dob"
                      },
                      {
                        "table": "students",
                        "column": "family"
                      }
                    ],
                    "table": {
                      "name": "enrolments"
                    },
                    "joins": [
                      {
                        "table": "students",
                        "column": "*",
                        "type": "INNER",
                        "clauses": {
                          "condition": "AND",
                          "rules": [
                            {
                              "table": "students",
                              "column": "id",
                              "operator": "equal",
                              "value": {
                                "table": "enrolments",
                                "column": "student"
                              },
                              "operation": "="
                            }
                          ]
                        }
                      }
                    ],
                    "wheres": {
                      "condition": "AND",
                      "rules": [
                        {
                          "id": "enrolments.isValid",
                          "field": "enrolments.isValid",
                          "type": "boolean",
                          "operator": "equal",
                          "value": true,
                          "data": {
                            "table": "enrolments",
                            "column": "isValid",
                            "type": "boolean"
                          },
                          "operation": "="
                        },
                        {
                          "id": "enrolments.classId",
                          "field": "enrolments.classId",
                          "type": "double",
                          "operator": "equal",
                          "value": "{{id}}",
                          "data": {
                            "table": "enrolments",
                            "column": "classId",
                            "type": "number"
                          },
                          "operation": "="
                        },
                        {
                          "id": "enrolments.enrolmentType",
                          "field": "enrolments.enrolmentType",
                          "type": "double",
                          "operator": "equal",
                          "value": 2,
                          "data": {
                            "table": "enrolments",
                            "column": "enrolmentType",
                            "type": "number"
                          },
                          "operation": "="
                        },
                        {
                          "condition": "OR",
                          "rules": [
                            {
                              "id": "enrolments.dropDate",
                              "field": "enrolments.dropDate",
                              "type": "date",
                              "operator": "greater_or_equal",
                              "value": "{{$_GET.startdate.formatDate('yyyy-MM-dd')}}",
                              "data": {
                                "table": "enrolments",
                                "column": "dropDate",
                                "type": "date"
                              },
                              "operation": ">="
                            },
                            {
                              "id": "enrolments.dropDate",
                              "field": "enrolments.dropDate",
                              "type": "date",
                              "operator": "is_null",
                              "value": null,
                              "data": {
                                "table": "enrolments",
                                "column": "dropDate",
                                "type": "date"
                              },
                              "operation": "IS NULL"
                            }
                          ],
                          "conditional": null
                        }
                      ],
                      "conditional": null,
                      "valid": true
                    },
                    "query": "SELECT enrolments.*, students.firstName, students.lastName, students.dob, students.family\nFROM enrolments\nINNER JOIN students ON (students.id = enrolments.student)\nWHERE enrolments.isValid = true AND enrolments.classId = :P1 /* {{id}} */ AND enrolments.enrolmentType = 2 AND (enrolments.dropDate >= :P2 /* {{$_GET.startdate.formatDate('yyyy-MM-dd')}} */ OR enrolments.dropDate IS NULL)",
                    "params": [
                      {
                        "operator": "equal",
                        "type": "expression",
                        "name": ":P1",
                        "value": "{{id}}"
                      },
                      {
                        "operator": "greater_or_equal",
                        "type": "expression",
                        "name": ":P2",
                        "value": "{{$_GET.startdate.formatDate('yyyy-MM-dd')}}"
                      }
                    ],
                    "orders": []
                  }
                },
                "output": true,
                "meta": [
                  {
                    "type": "number",
                    "name": "id"
                  },
                  {
                    "type": "number",
                    "name": "enrolmentType"
                  },
                  {
                    "type": "date",
                    "name": "dropDate"
                  },
                  {
                    "type": "boolean",
                    "name": "isValid"
                  },
                  {
                    "type": "number",
                    "name": "student"
                  },
                  {
                    "type": "date",
                    "name": "startDate"
                  },
                  {
                    "type": "number",
                    "name": "classId"
                  },
                  {
                    "type": "text",
                    "name": "dropReason"
                  },
                  {
                    "type": "text",
                    "name": "firstName"
                  },
                  {
                    "type": "text",
                    "name": "lastName"
                  },
                  {
                    "type": "date",
                    "name": "dob"
                  },
                  {
                    "type": "number",
                    "name": "family"
                  }
                ],
                "outputType": "array"
              },
              {
                "name": "casual_enrols",
                "module": "dbconnector",
                "action": "select",
                "options": {
                  "connection": "db",
                  "sql": {
                    "type": "SELECT",
                    "columns": [
                      {
                        "table": "enrolments",
                        "column": "*"
                      },
                      {
                        "table": "students",
                        "column": "firstName"
                      },
                      {
                        "table": "students",
                        "column": "lastName"
                      },
                      {
                        "table": "students",
                        "column": "dob"
                      },
                      {
                        "table": "students",
                        "column": "family"
                      }
                    ],
                    "table": {
                      "name": "enrolments"
                    },
                    "joins": [
                      {
                        "table": "students",
                        "column": "*",
                        "type": "INNER",
                        "clauses": {
                          "condition": "AND",
                          "rules": [
                            {
                              "table": "students",
                              "column": "id",
                              "operator": "equal",
                              "value": {
                                "table": "enrolments",
                                "column": "student"
                              },
                              "operation": "="
                            }
                          ]
                        }
                      }
                    ],
                    "wheres": {
                      "condition": "AND",
                      "rules": [
                        {
                          "id": "enrolments.isValid",
                          "field": "enrolments.isValid",
                          "type": "boolean",
                          "operator": "equal",
                          "value": true,
                          "data": {
                            "table": "enrolments",
                            "column": "isValid",
                            "type": "boolean"
                          },
                          "operation": "="
                        },
                        {
                          "id": "enrolments.classId",
                          "field": "enrolments.classId",
                          "type": "double",
                          "operator": "equal",
                          "value": "{{id}}",
                          "data": {
                            "table": "enrolments",
                            "column": "classId",
                            "type": "number"
                          },
                          "operation": "="
                        },
                        {
                          "id": "enrolments.enrolmentType",
                          "field": "enrolments.enrolmentType",
                          "type": "double",
                          "operator": "equal",
                          "value": 5,
                          "data": {
                            "table": "enrolments",
                            "column": "enrolmentType",
                            "type": "number"
                          },
                          "operation": "="
                        },
                        {
                          "condition": "OR",
                          "rules": [
                            {
                              "id": "enrolments.dropDate",
                              "field": "enrolments.dropDate",
                              "type": "date",
                              "operator": "greater_or_equal",
                              "value": "{{$_GET.startdate.formatDate('yyyy-MM-dd')}}",
                              "data": {
                                "table": "enrolments",
                                "column": "dropDate",
                                "type": "date"
                              },
                              "operation": ">="
                            },
                            {
                              "id": "enrolments.dropDate",
                              "field": "enrolments.dropDate",
                              "type": "date",
                              "operator": "is_null",
                              "value": null,
                              "data": {
                                "table": "enrolments",
                                "column": "dropDate",
                                "type": "date"
                              },
                              "operation": "IS NULL"
                            }
                          ],
                          "conditional": null
                        }
                      ],
                      "conditional": null,
                      "valid": true
                    },
                    "query": "SELECT enrolments.*, students.firstName, students.lastName, students.dob, students.family\nFROM enrolments\nINNER JOIN students ON (students.id = enrolments.student)\nWHERE enrolments.isValid = true AND enrolments.classId = :P1 /* {{id}} */ AND enrolments.enrolmentType = 5 AND (enrolments.dropDate >= :P2 /* {{$_GET.startdate.formatDate('yyyy-MM-dd')}} */ OR enrolments.dropDate IS NULL)",
                    "params": [
                      {
                        "operator": "equal",
                        "type": "expression",
                        "name": ":P1",
                        "value": "{{id}}"
                      },
                      {
                        "operator": "greater_or_equal",
                        "type": "expression",
                        "name": ":P2",
                        "value": "{{$_GET.startdate.formatDate('yyyy-MM-dd')}}"
                      }
                    ],
                    "orders": []
                  }
                },
                "output": true,
                "meta": [
                  {
                    "type": "number",
                    "name": "id"
                  },
                  {
                    "type": "number",
                    "name": "enrolmentType"
                  },
                  {
                    "type": "date",
                    "name": "dropDate"
                  },
                  {
                    "type": "boolean",
                    "name": "isValid"
                  },
                  {
                    "type": "number",
                    "name": "student"
                  },
                  {
                    "type": "date",
                    "name": "startDate"
                  },
                  {
                    "type": "number",
                    "name": "classId"
                  },
                  {
                    "type": "text",
                    "name": "dropReason"
                  },
                  {
                    "type": "text",
                    "name": "firstName"
                  },
                  {
                    "type": "text",
                    "name": "lastName"
                  },
                  {
                    "type": "date",
                    "name": "dob"
                  },
                  {
                    "type": "number",
                    "name": "family"
                  }
                ],
                "outputType": "array"
              },
              {
                "name": "wait_enrols",
                "module": "dbconnector",
                "action": "select",
                "options": {
                  "connection": "db",
                  "sql": {
                    "type": "SELECT",
                    "columns": [
                      {
                        "table": "waitlists",
                        "column": "*"
                      },
                      {
                        "table": "students",
                        "column": "firstName"
                      },
                      {
                        "table": "students",
                        "column": "lastName"
                      },
                      {
                        "table": "students",
                        "column": "dob"
                      },
                      {
                        "table": "students",
                        "column": "family"
                      }
                    ],
                    "table": {
                      "name": "waitlists"
                    },
                    "joins": [
                      {
                        "table": "students",
                        "column": "*",
                        "type": "INNER",
                        "clauses": {
                          "condition": "AND",
                          "rules": [
                            {
                              "table": "students",
                              "column": "id",
                              "operator": "equal",
                              "value": {
                                "table": "waitlists",
                                "column": "studentid"
                              },
                              "operation": "="
                            }
                          ]
                        }
                      }
                    ],
                    "query": "SELECT waitlists.*, students.firstName, students.lastName, students.dob, students.family\nFROM waitlists\nINNER JOIN students ON (students.id = waitlists.studentid)\nWHERE (waitlists.endtimedec >= :P1 /* {{endTimeDecimal}} */ AND waitlists.starttimedec <= :P2 /* {{startTimeDecimal}} */ AND waitlists.dayint = :P3 /* {{day_int}} */ AND (waitlists.instructor = :P4 /* {{instructorid}} */ OR waitlists.instructor IS NULL) AND waitlists.fulfil_date IS NULL AND (waitlists.classlevel = :P5 /* {{classLevel}} */ OR waitlists.classlevel IS NULL))",
                    "params": [
                      {
                        "operator": "greater_or_equal",
                        "type": "expression",
                        "name": ":P1",
                        "value": "{{endTimeDecimal}}"
                      },
                      {
                        "operator": "less_or_equal",
                        "type": "expression",
                        "name": ":P2",
                        "value": "{{startTimeDecimal}}"
                      },
                      {
                        "operator": "equal",
                        "type": "expression",
                        "name": ":P3",
                        "value": "{{day_int}}"
                      },
                      {
                        "operator": "equal",
                        "type": "expression",
                        "name": ":P4",
                        "value": "{{instructorid}}"
                      },
                      {
                        "operator": "equal",
                        "type": "expression",
                        "name": ":P5",
                        "value": "{{classLevel}}"
                      }
                    ],
                    "orders": [],
                    "wheres": {
                      "condition": "AND",
                      "rules": [
                        {
                          "condition": "AND",
                          "rules": [
                            {
                              "id": "waitlists.endtimedec",
                              "field": "waitlists.endtimedec",
                              "type": "double",
                              "operator": "greater_or_equal",
                              "value": "{{endTimeDecimal}}",
                              "data": {
                                "table": "waitlists",
                                "column": "endtimedec",
                                "type": "number"
                              },
                              "operation": ">="
                            },
                            {
                              "id": "waitlists.starttimedec",
                              "field": "waitlists.starttimedec",
                              "type": "double",
                              "operator": "less_or_equal",
                              "value": "{{startTimeDecimal}}",
                              "data": {
                                "table": "waitlists",
                                "column": "starttimedec",
                                "type": "number"
                              },
                              "operation": "<="
                            },
                            {
                              "id": "waitlists.dayint",
                              "field": "waitlists.dayint",
                              "type": "double",
                              "operator": "equal",
                              "value": "{{day_int}}",
                              "data": {
                                "table": "waitlists",
                                "column": "dayint",
                                "type": "number"
                              },
                              "operation": "="
                            },
                            {
                              "condition": "OR",
                              "rules": [
                                {
                                  "id": "waitlists.instructor",
                                  "field": "waitlists.instructor",
                                  "type": "double",
                                  "operator": "equal",
                                  "value": "{{instructorid}}",
                                  "data": {
                                    "table": "waitlists",
                                    "column": "instructor",
                                    "type": "number"
                                  },
                                  "operation": "="
                                },
                                {
                                  "id": "waitlists.instructor",
                                  "field": "waitlists.instructor",
                                  "type": "double",
                                  "operator": "is_null",
                                  "value": null,
                                  "data": {
                                    "table": "waitlists",
                                    "column": "instructor",
                                    "type": "number"
                                  },
                                  "operation": "IS NULL"
                                }
                              ],
                              "conditional": null
                            },
                            {
                              "id": "waitlists.fulfil_date",
                              "field": "waitlists.fulfil_date",
                              "type": "date",
                              "operator": "is_null",
                              "value": null,
                              "data": {
                                "table": "waitlists",
                                "column": "fulfil_date",
                                "type": "date"
                              },
                              "operation": "IS NULL"
                            },
                            {
                              "condition": "OR",
                              "rules": [
                                {
                                  "id": "waitlists.classlevel",
                                  "field": "waitlists.classlevel",
                                  "type": "double",
                                  "operator": "equal",
                                  "value": "{{classLevel}}",
                                  "data": {
                                    "table": "waitlists",
                                    "column": "classlevel",
                                    "type": "number"
                                  },
                                  "operation": "="
                                },
                                {
                                  "id": "waitlists.classlevel",
                                  "field": "waitlists.classlevel",
                                  "type": "double",
                                  "operator": "is_null",
                                  "value": null,
                                  "data": {
                                    "table": "waitlists",
                                    "column": "classlevel",
                                    "type": "number"
                                  },
                                  "operation": "IS NULL"
                                }
                              ],
                              "conditional": null
                            }
                          ],
                          "conditional": null
                        }
                      ],
                      "conditional": null,
                      "valid": true
                    }
                  }
                },
                "output": true,
                "meta": [
                  {
                    "type": "number",
                    "name": "id"
                  },
                  {
                    "type": "number",
                    "name": "studentid"
                  },
                  {
                    "type": "date",
                    "name": "request_date"
                  },
                  {
                    "type": "date",
                    "name": "fulfil_date"
                  },
                  {
                    "type": "number",
                    "name": "classlevel"
                  },
                  {
                    "type": "number",
                    "name": "starttimedec"
                  },
                  {
                    "type": "number",
                    "name": "endtimedec"
                  },
                  {
                    "type": "number",
                    "name": "dayint"
                  },
                  {
                    "type": "number",
                    "name": "instructor"
                  },
                  {
                    "type": "text",
                    "name": "notes"
                  },
                  {
                    "type": "text",
                    "name": "firstName"
                  },
                  {
                    "type": "text",
                    "name": "lastName"
                  },
                  {
                    "type": "date",
                    "name": "dob"
                  },
                  {
                    "type": "number",
                    "name": "family"
                  }
                ],
                "outputType": "array"
              },
              {
                "name": "total_enrols",
                "module": "core",
                "action": "setvalue",
                "options": {
                  "value": "{{max - (active_enrols.length+trial_enrols.length +makeup_enrols.length+casual_enrols.length)}}"
                },
                "meta": [],
                "outputType": "text",
                "output": true
              }
            ]
          }
        },
        "output": true,
        "meta": [
          {
            "name": "$index",
            "type": "number"
          },
          {
            "name": "$number",
            "type": "number"
          },
          {
            "name": "$name",
            "type": "text"
          },
          {
            "name": "$value",
            "type": "object"
          },
          {
            "name": "id",
            "type": "number"
          },
          {
            "name": "classLevel",
            "type": "number"
          },
          {
            "name": "day_name",
            "type": "text"
          },
          {
            "name": "day_int",
            "type": "number"
          },
          {
            "name": "startdate",
            "type": "date"
          },
          {
            "name": "enddate",
            "type": "date"
          },
          {
            "name": "classType",
            "type": "number"
          },
          {
            "name": "startTimeDisplay",
            "type": "text"
          },
          {
            "name": "startTimeDecimal",
            "type": "number"
          },
          {
            "name": "endTimeDisplay",
            "type": "text"
          },
          {
            "name": "endTimeDecimal",
            "type": "number"
          },
          {
            "name": "max",
            "type": "number"
          },
          {
            "name": "instructor_firstname",
            "type": "text"
          },
          {
            "name": "instructor_lastname",
            "type": "text"
          },
          {
            "name": "instructorid",
            "type": "number"
          },
          {
            "name": "enrolcount",
            "type": "number"
          },
          {
            "name": "enrol_active",
            "type": "number"
          },
          {
            "name": "enrol_makeup",
            "type": "number"
          },
          {
            "name": "enrol_trial",
            "type": "number"
          },
          {
            "name": "enrol_waitlist",
            "type": "number"
          },
          {
            "name": "enrol_casual",
            "type": "number"
          },
          {
            "name": "slots_avail",
            "type": "number"
          },
          {
            "name": "active_enrols",
            "type": "array",
            "sub": [
              {
                "type": "number",
                "name": "id"
              },
              {
                "type": "number",
                "name": "enrolmentType"
              },
              {
                "type": "date",
                "name": "dropDate"
              },
              {
                "type": "boolean",
                "name": "isValid"
              },
              {
                "type": "number",
                "name": "student"
              },
              {
                "type": "date",
                "name": "startDate"
              },
              {
                "type": "number",
                "name": "classId"
              },
              {
                "type": "text",
                "name": "dropReason"
              },
              {
                "type": "text",
                "name": "firstName"
              },
              {
                "type": "text",
                "name": "lastName"
              },
              {
                "type": "date",
                "name": "dob"
              },
              {
                "type": "number",
                "name": "family"
              }
            ]
          },
          {
            "name": "trial_enrols",
            "type": "array",
            "sub": [
              {
                "type": "number",
                "name": "id"
              },
              {
                "type": "number",
                "name": "enrolmentType"
              },
              {
                "type": "date",
                "name": "dropDate"
              },
              {
                "type": "boolean",
                "name": "isValid"
              },
              {
                "type": "number",
                "name": "student"
              },
              {
                "type": "date",
                "name": "startDate"
              },
              {
                "type": "number",
                "name": "classId"
              },
              {
                "type": "text",
                "name": "dropReason"
              },
              {
                "type": "text",
                "name": "firstName"
              },
              {
                "type": "text",
                "name": "lastName"
              },
              {
                "type": "date",
                "name": "dob"
              },
              {
                "type": "number",
                "name": "family"
              }
            ]
          },
          {
            "name": "makeup_enrols",
            "type": "array",
            "sub": [
              {
                "type": "number",
                "name": "id"
              },
              {
                "type": "number",
                "name": "enrolmentType"
              },
              {
                "type": "date",
                "name": "dropDate"
              },
              {
                "type": "boolean",
                "name": "isValid"
              },
              {
                "type": "number",
                "name": "student"
              },
              {
                "type": "date",
                "name": "startDate"
              },
              {
                "type": "number",
                "name": "classId"
              },
              {
                "type": "text",
                "name": "dropReason"
              },
              {
                "type": "text",
                "name": "firstName"
              },
              {
                "type": "text",
                "name": "lastName"
              },
              {
                "type": "date",
                "name": "dob"
              },
              {
                "type": "number",
                "name": "family"
              }
            ]
          },
          {
            "name": "casual_enrols",
            "type": "array",
            "sub": [
              {
                "type": "number",
                "name": "id"
              },
              {
                "type": "number",
                "name": "enrolmentType"
              },
              {
                "type": "date",
                "name": "dropDate"
              },
              {
                "type": "boolean",
                "name": "isValid"
              },
              {
                "type": "number",
                "name": "student"
              },
              {
                "type": "date",
                "name": "startDate"
              },
              {
                "type": "number",
                "name": "classId"
              },
              {
                "type": "text",
                "name": "dropReason"
              },
              {
                "type": "text",
                "name": "firstName"
              },
              {
                "type": "text",
                "name": "lastName"
              },
              {
                "type": "date",
                "name": "dob"
              },
              {
                "type": "number",
                "name": "family"
              }
            ]
          },
          {
            "name": "wait_enrols",
            "type": "array",
            "sub": [
              {
                "type": "number",
                "name": "id"
              },
              {
                "type": "number",
                "name": "studentid"
              },
              {
                "type": "date",
                "name": "request_date"
              },
              {
                "type": "date",
                "name": "fulfil_date"
              },
              {
                "type": "number",
                "name": "classlevel"
              },
              {
                "type": "number",
                "name": "starttimedec"
              },
              {
                "type": "number",
                "name": "endtimedec"
              },
              {
                "type": "number",
                "name": "dayint"
              },
              {
                "type": "number",
                "name": "instructor"
              },
              {
                "type": "text",
                "name": "notes"
              },
              {
                "type": "text",
                "name": "firstName"
              },
              {
                "type": "text",
                "name": "lastName"
              },
              {
                "type": "date",
                "name": "dob"
              },
              {
                "type": "number",
                "name": "family"
              }
            ]
          },
          {
            "name": "total_enrols",
            "type": "text",
            "sub": []
          }
        ],
        "outputType": "array"
      },
      {
        "name": "enrolmentTypes",
        "module": "dbconnector",
        "action": "select",
        "options": {
          "connection": "db",
          "sql": {
            "type": "SELECT",
            "columns": [],
            "table": {
              "name": "enrolmentTypes"
            },
            "joins": [],
            "query": "SELECT *\nFROM enrolmentTypes",
            "params": []
          }
        },
        "output": true,
        "meta": [
          {
            "type": "number",
            "name": "id"
          },
          {
            "type": "text",
            "name": "type"
          }
        ],
        "outputType": "array"
      }
    ]
  }
}