{
  "meta": {
    "$_GET": [
      {
        "type": "text",
        "name": "sort"
      },
      {
        "type": "text",
        "name": "dir"
      },
      {
        "type": "text",
        "name": "paymentid"
      },
      {
        "type": "text",
        "name": "host"
      },
      {
        "type": "text",
        "name": "familyid"
      }
    ],
    "$_POST": [
      {
        "type": "text",
        "name": "familyid"
      },
      {
        "type": "text",
        "name": "paymentid"
      },
      {
        "type": "text",
        "name": "host"
      }
    ]
  },
  "exec": {
    "steps": [
      {
        "name": "host",
        "module": "core",
        "action": "setvalue",
        "options": {
          "key": "host",
          "value": "{{null}}"
        },
        "meta": [],
        "outputType": "text"
      },
      {
        "name": "",
        "module": "core",
        "action": "condition",
        "options": {
          "if": "{{$_POST.host.contains('localhost')}}",
          "then": {
            "steps": {
              "name": "host",
              "module": "core",
              "action": "setvalue",
              "options": {
                "key": "host",
                "value": "http://ssacrm:3000"
              },
              "meta": [],
              "outputType": "text"
            }
          },
          "else": {
            "steps": {
              "name": "host",
              "module": "core",
              "action": "setvalue",
              "options": {
                "key": "host",
                "value": "{{$_POST.host}}"
              },
              "meta": [],
              "outputType": "text"
            }
          }
        },
        "outputType": "boolean"
      },
      "lib/families/receipts/singlepayment",
      {
        "name": "templatepath",
        "module": "core",
        "action": "setvalue",
        "options": {
          "key": "templatepath",
          "value": "/pdf_templates/receipts/tuition_receipt.ejs"
        },
        "meta": [],
        "outputType": "text"
      },
      {
        "name": "generatepdf",
        "module": "EJStoPDF",
        "action": "EJStoPDF",
        "options": {
          "orientation": "p",
          "papersize": "A4",
          "folderName": "/temp/tuition_receipts",
          "fileName": "{{$_POST.familyid+'-'+TIMESTAMP}}",
          "jsonresponse": "{{payment}}",
          "hostname": "{{host}}",
          "printbackground": "true",
          "tempPath": "{{templatepath}}",
          "topMargin": "",
          "rightMargin": "",
          "bottomMargin": "",
          "leftMargin": ""
        },
        "meta": [
          {
            "name": "FileName",
            "type": "text"
          },
          {
            "name": "FilePath",
            "type": "text"
          }
        ],
        "output": true
      }
    ]
  }
}