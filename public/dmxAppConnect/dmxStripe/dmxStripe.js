/*!
 DMXzone Stripe
 Version: 1.0.4
 (c) 2021 DMXzone.com
 @build 2021-07-22 15:28:43
 */
dmx.stripe={wait:[],locale:"auto",instance:null,elements:null,ready:function(e){dmx.stripe.instance?e(dmx.stripe.instance):dmx.stripe.wait.push(e)},theme:{default:{classes:{},style:{},error:{class:"dmxValidator-invalid"}},bootstrap:{classes:{base:"form-control",invalid:"is-invalid"},style:{base:{fontSize:"16px",lineHeight:"26px"}},error:{class:"invalid-feedback"}}}},dmx.Actions({"stripe.redirectToCheckout":function(e){return e||(e={}),e.locale||(e.locale=dmx.stripe.locale),dmx.stripe.instance.redirectToCheckout(e)},"stripe.confirmCardPayment":function(e){if(e||(e={}),!e.clientSecret)throw Error("clientSecret is required");return dmx.stripe.instance.confirmCardPayment(e.clientSecret,e)},"stripe.confirmAlipayPayment":function(e){if(e||(e={}),!e.clientSecret)throw Error("clientSecret is required");return dmx.stripe.instance.confirmAlipayPayment(e.clientSecret,e)},"stripe.confirmAuBecsDebitPayment":function(e){if(e||(e={}),!e.clientSecret)throw Error("clientSecret is required");return dmx.stripe.instance.confirmAuBecsDebitPayment(e.clientSecret,e)},"stripe.confirmBancontactPayment":function(e){if(e||(e={}),!e.clientSecret)throw Error("clientSecret is required");return dmx.stripe.instance.confirmBancontactPayment(e.clientSecret,e)},"stripe.confirmEpsPayment":function(e){if(e||(e={}),!e.clientSecret)throw Error("clientSecret is required");return dmx.stripe.instance.confirmEpsPayment(e.clientSecret,e)},"stripe.confirmFpxPayment":function(e){if(e||(e={}),!e.clientSecret)throw Error("clientSecret is required");return dmx.stripe.instance.confirmFpxPayment(e.clientSecret,e)},"stripe.confirmGiropayPayment":function(e){if(e||(e={}),!e.clientSecret)throw Error("clientSecret is required");return dmx.stripe.instance.confirmGiropayPayment(e.clientSecret,e)},"stripe.confirmGrabPayPayment":function(e){if(e||(e={}),!e.clientSecret)throw Error("clientSecret is required");return dmx.stripe.instance.confirmGrabPayPayment(e.clientSecret,e)},"stripe.confirmIdealPayment":function(e){if(e||(e={}),!e.clientSecret)throw Error("clientSecret is required");return dmx.stripe.instance.confirmIdealPayment(e.clientSecret,e)},"stripe.confirmOxxoPayment":function(e){if(e||(e={}),!e.clientSecret)throw Error("clientSecret is required");return dmx.stripe.instance.confirmOxxoPayment(e.clientSecret,e)},"stripe.confirmP24Payment":function(e){if(e||(e={}),!e.clientSecret)throw Error("clientSecret is required");return dmx.stripe.instance.confirmP24Payment(e.clientSecret,e)},"stripe.confirmSepaDebitPayment":function(e){if(e||(e={}),!e.clientSecret)throw Error("clientSecret is required");return dmx.stripe.instance.confirmSepaDebitPayment(e.clientSecret,e)},"stripe.confirmSofortPayment":function(e){if(e||(e={}),!e.clientSecret)throw Error("clientSecret is required");return dmx.stripe.instance.confirmSofortPayment(e.clientSecret,e)},"stripe.handleCardAction":function(e){if(e||(e={}),!e.clientSecret)throw Error("clientSecret is required");return dmx.stripe.instance.handleCardAction(e.clientSecret)},"stripe.retrievePaymentIntent":function(e){if(e||(e={}),!e.clientSecret)throw Error("clientSecret is required");return dmx.stripe.instance.retrievePaymentIntent(e.clientSecret)},"stripe.confirmCardSetup":function(e){if(e||(e={}),!e.clientSecret)throw Error("clientSecret is required");return dmx.stripe.instance.confirmCardSetup(e.clientSecret,e)},"stripe.confirmAuBecsDebitSetup":function(e){if(e||(e={}),!e.clientSecret)throw Error("clientSecret is required");return dmx.stripe.instance.confirmAuBecsDebitSetup(e.clientSecret,e)},"stripe.confirmBacsDebitSetup":function(e){if(e||(e={}),!e.clientSecret)throw Error("clientSecret is required");return dmx.stripe.instance.confirmBacsDebitSetup(e.clientSecret,e)},"stripe.confirmBancontactSetup":function(e){if(e||(e={}),!e.clientSecret)throw Error("clientSecret is required");return dmx.stripe.instance.confirmBancontactSetup(e.clientSecret,e)},"stripe.confirmIdealSetup":function(e){if(e||(e={}),!e.clientSecret)throw Error("clientSecret is required");return dmx.stripe.instance.confirmIdealSetup(e.clientSecret,e)},"stripe.confirmSepaDebitSetup":function(e){if(e||(e={}),!e.clientSecret)throw Error("clientSecret is required");return dmx.stripe.instance.confirmSepaDebitSetup(e.clientSecret,e)},"stripe.confirmSofortSetup":function(e){if(e||(e={}),!e.clientSecret)throw Error("clientSecret is required");return dmx.stripe.instance.confirmSofortSetup(e.clientSecret,e)},"stripe.retrieveSetupIntent":function(e){if(e||(e={}),!e.clientSecret)throw Error("clientSecret is required");return dmx.stripe.instance.retrieveSetupIntent(e.clientSecret)},"stripe.createPaymentMethod":function(e){if(e||(e={}),!e.type)throw Error("type is required");return dmx.stripe.instance.createPaymentMethod(e)},"stripe.createSource":function(e){if(e||(e={}),!e.type)throw Error("type is required");return dmx.stripe.instance.createSource(e)},"stripe.retrieveSource":function(e){if(e||(e={}),!e.id)throw Error("id is required");if(!e.client_secret)throw Error("client_secret is required");return dmx.stripe.instance.retrieveSource(e)}}),dmx.Component("stripe",{initialData:{data:null,lastError:null},attributes:{key:{type:String,default:null},account:{type:String,default:null},locale:{type:String,default:"auto"},"line-items":{type:[String,Array],default:null},mode:{type:String,default:"payment",enum:["payment","subscription"]},"success-url":{type:String,default:null},"cancel-url":{type:String,default:null},"session-url":{type:String,default:null},"payment-url":{type:String,default:null},"setup-url":{type:String,default:null}},methods:{checkout:function(e){var t=this;if(this.props["session-url"]){var n=this.props["session-url"];window.WebviewProxy&&(n=window.WebviewProxy.convertProxyUrl(n));var r=new XMLHttpRequest;r.onload=function(){if(200==r.status){var e;try{e=JSON.parse(r.responseText)}catch(e){return void t.error(e.message)}if(!e.id)return void(e.error?t.error(e.error):t.error("Id is missing in session response."));dmx.stripe.instance.redirectToCheckout({sessionId:e.id}).then(function(e){e.error&&t.error(e.error)}).catch(function(e){t.error(e.message)})}else t.error("An error occurred during the transaction.")},r.onerror=function(){t.error("An error occurred during the transaction.")},r.withCredentials=!0,r.open("POST",n);try{r.setRequestHeader("Content-Type","application/json"),r.send(JSON.stringify(Object.assign({},{lineItems:this.props["line-items"]||[]},e)))}catch(e){t.error(e.message)}}else{var i={lineItems:this.props["line-items"],mode:this.props.mode,successUrl:this.props["success-url"],cancelUrl:this.props["cancel-url"]};i.successUrl?i.cancelUrl?("string"==typeof i.lineItems&&(i.lineItems=[i.lineItems]),Array.isArray(i.lineItems)?(i.lineItems=i.lineItems.map(function(e){return"string"==typeof e?{price:e,quantity:1}:{price:e.price||e.sku||e.plan,quantity:e.quantity||1}}),i.successUrl=this.fixUrl(i.successUrl),i.cancelUrl=this.fixUrl(i.cancelUrl),dmx.stripe.instance.redirectToCheckout(i).then(function(e){e.error&&t.error(e.error)})):this.error("Invalid line items.")):this.error("cancelUrl is required."):this.error("successUrl is required.")}},createPayment:function(e){if(this.props["payment-url"]){var t=this,n=this.props["payment-url"];window.WebviewProxy&&(n=window.WebviewProxy.convertProxyUrl(n));var r=new XMLHttpRequest;r.onload=function(){var e;if(200==r.status)try{e=JSON.parse(r.responseText),t.set("data",e),e.client_secret&&(dmx.stripe.client_secret=e.client_secret),t.dispatchEvent("done"),t.dispatchEvent("payment_created")}catch(e){return void t.error(e.message)}else t.error("An error occurred during the transaction.")},r.onerror=function(){t.error("An error occurred during the transaction.")},r.withCredentials=!0,r.open("POST",n);try{r.setRequestHeader("Content-Type","application/json"),r.send(JSON.stringify(Object.assign({lineItems:this.props["line-items"]||[]},e)))}catch(e){t.error(e.message)}}else;},createSetup:function(e){if(this.props["setup-url"]){var t=this,n=this.props["setup-url"];window.WebviewProxy&&(n=window.WebviewProxy.convertProxyUrl(n));var r=new XMLHttpRequest;r.onload=function(){var e;if(200==r.status)try{e=JSON.parse(r.responseText),t.set("data",e),e.client_secret&&(dmx.stripe.client_secret=e.client_secret),t.dispatchEvent("done"),t.dispatchEvent("setup_created")}catch(e){return void t.error(e.message)}else t.error("An error occurred during the transaction.")},r.onerror=function(){t.error("An error occurred during the transaction.")},r.withCredentials=!0,r.open("POST",n);try{r.setRequestHeader("Content-Type","application/json"),r.send(JSON.stringify(Object.assign({lineItems:this.props["line-items"]||[]},e)))}catch(e){t.error(e.message)}}else;}},events:{done:Event,error:Event,ready:Event,payment_created:Event,setup_created:Event},render:function(e){this.props.key&&this.setup()},update:function(e){!e.key&&this.props.key&&this.setup()},setup:function(){try{console.log("Stripe Setup"),dmx.stripe.locale=this.props.locale,this.props.account?dmx.stripe.instance=Stripe(this.props.key,{stripeAccount:this.props.account,locale:this.props.locale}):dmx.stripe.instance=Stripe(this.props.key,{locale:this.props.locale}),dmx.stripe.elements=dmx.stripe.instance.elements({locale:this.props.locale}),dmx.stripe.wait.length&&(dmx.stripe.wait.forEach(function(e){e(dmx.stripe.instance)}),dmx.stripe.wait=[]),this.dispatchEvent("ready"),console.log("Stripe Ready")}catch(e){console.error(e)}},fixUrl:function(e){var t=document.createElement("a");return t.setAttribute("href",e),t.href},error:function(e){console.error(e),this.set("lastError",e),this.dispatchEvent("error")}}),dmx.Component("stripe-au-bank-account",{initialData:{complete:!1,empty:!0,bankName:"",branchName:"",error:void 0,source:void 0,paymentMethod:void 0,paymentIntent:void 0,setupIntent:void 0},attributes:{value:{type:String,default:""},"icon-style":{type:String,default:"default",enum:["default","solid"]},"hide-icon":{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},"hide-errors":{type:Boolean,default:!1},"accountholder-name":{type:String,default:""}},methods:{blur:function(){this.instance&&this.element.blur()},clear:function(){this.instance&&this.element.clear()},focus:function(){this.instance&&this.element.focus()},createSource:function(e){if(this.instance){var t=this;return dmx.stripe.instance.createSource(this.element,e).then(function(e){return e.error?(t.set("error",e.error),t.dispatchEvent("error")):(t.set("source",e.source),t.dispatchEvent("source_created")),e})}},createPaymentMethod:function(){if(this.instance){var t=this;return dmx.stripe.instance.createPaymentMethod({type:"au_becs_debit",au_becs_debit:this.element}).then(function(e){return e.error?(t.set("error",e.error),t.dispatchEvent("error")):(t.set("paymentMethod",e.paymentMethod),t.dispatchEvent("payment_method_created")),e})}},confirmPayment:function(e){if(this.instance){var t=this;return dmx.stripe.instance.confirmAuBecsDebitPayment(e||dmx.stripe.client_secret,{payment_method:{au_becs_debit:this.element,billing_details:{name:this.props["accountholder-name"]}}}).then(function(e){return e.error?(t.set("error",e.error),t.dispatchEvent("error")):(t.set("paymentIntent",e.paymentIntent),t.dispatchEvent("payment_confirmed")),e})}},confirmSetup:function(e){if(this.instance){var t=this;return dmx.stripe.instance.confirmAuBecsDebitSetup(e||dmx.stripe.client_secret,{payment_method:{au_becs_debit:this.element,billing_details:{name:this.props["accountholder-name"]}}}).then(function(e){return e.error?(t.set("error",e.error),t.dispatchEvent("error")):(t.set("setupIntent",e.setupIntent),t.dispatchEvent("setup_confirmed")),e})}}},events:{change:Event,ready:Event,focus:Event,blur:Event,escape:Event,error:Event,source_created:Event,payment_method_created:Event,payment_confirmed:Event,setup_confirmed:Event},onchange:function(e){this.set(e),this.props["hide-errors"]||(this.errorElement.textContent=e.error?e.error.message:"")},render:function(n){var r=this;dmx.stripe.ready(function(e){var t=dmx.stripe.theme[window.bootstrap?"bootstrap":"default"];r.element=dmx.stripe.elements.create("auBankAccount",{value:r.props.value,iconStyle:r.props["icon-style"],hideIcon:r.props["hide-icon"],disabled:r.props.disabled,classes:t.classes,style:t.style}),r.element.mount(n),r.errorElement=document.createElement("div"),r.errorElement.className=t.error.class,n.insertAdjacentElement("afterend",r.errorElement),r.element.on("change",r.onchange.bind(r)),r.element.on("change",r.dispatchEvent.bind(r,"change")),r.element.on("ready",r.dispatchEvent.bind(r,"ready")),r.element.on("focus",r.dispatchEvent.bind(r,"focus")),r.element.on("blur",r.dispatchEvent.bind(r,"blur")),r.element.on("escape",r.dispatchEvent.bind(r,"escape"))})},update:function(e){this.instance&&(this.props.value!=e.value&&this.element.update({value:this.props.value}),this.props["icon-style"]!=e["icon-style"]&&this.element.update({iconStyle:this.props["icon-style"]}),this.props["hide-icon"]!=e["hide-icon"]&&this.element.update({hideIcon:this.props["hide-icon"]}),this.props.disabled!=e.disabled&&this.element.update({disabled:this.props.disabled}))},destroy:function(){this.element&&this.element.destroy()}}),dmx.Component("stripe-card",{initialData:{complete:!1,brand:"",empty:!0,value:{postalCode:""},error:void 0,token:void 0,source:void 0,paymentMethod:void 0,paymentIntent:void 0,setupIntent:void 0},attributes:{"hide-postal-code":{type:Boolean,default:!1},"icon-style":{type:String,default:"default",enum:["default","solid"]},"hide-icon":{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},"hide-errors":{type:Boolean,default:!1}},methods:{blur:function(){this.element&&this.element.blur()},clear:function(){this.element&&this.element.clear()},focus:function(){this.element&&this.element.focus()},createToken:function(e){if(this.element){var t=this;return dmx.stripe.instance.createToken(this.element,e).then(function(e){return e.error?(t.set("error",e.error),t.dispatchEvent("error")):(t.set("token",e.token),t.dispatchEvent("token_created")),e})}},createSource:function(e){if(this.element){var t=this;return dmx.stripe.instance.createSource(this.element,e).then(function(e){return e.error?(t.set("error",e.error),t.dispatchEvent("error")):(t.set("source",e.source),t.dispatchEvent("source_created")),e})}},createPaymentMethod:function(){if(this.element){var t=this;return dmx.stripe.instance.createPaymentMethod({type:"card",card:this.element}).then(function(e){return e.error?(t.set("error",e.error),t.dispatchEvent("error")):(t.set("paymentMethod",e.paymentMethod),t.dispatchEvent("payment_method_created")),e})}},confirmPayment:function(e){if(this.element){var t=this;return dmx.stripe.instance.confirmCardPayment(e||dmx.stripe.client_secret,{payment_method:{card:this.element}}).then(function(e){return e.error?(t.set("error",e.error),t.dispatchEvent("error")):(t.set("paymentIntent",e.paymentIntent),t.dispatchEvent("payment_confirmed")),e})}},confirmSetup:function(e){if(this.element){var t=this;return dmx.stripe.instance.confirmCardSetup(e||dmx.stripe.client_secret,{payment_method:{card:this.element}}).then(function(e){return e.error?(t.set("error",e.error),t.dispatchEvent("error")):(t.set("setupIntent",e.setupIntent),t.dispatchEvent("setup_confirmed")),e})}}},events:{change:Event,ready:Event,focus:Event,blur:Event,escape:Event,error:Event,token_created:Event,source_created:Event,payment_method_created:Event,payment_confirmed:Event,setup_confirmed:Event},onchange:function(e){this.set(e),this.props["hide-errors"]||(this.errorElement.textContent=e.error?e.error.message:"")},render:function(n){var r=this;dmx.stripe.ready(function(e){var t=dmx.stripe.theme[window.bootstrap?"bootstrap":"default"];r.element=dmx.stripe.elements.create("card",{hidePostalCode:r.props["hide-postal-code"],iconStyle:r.props["icon-style"],hideIcon:r.props["hide-icon"],disabled:r.props.disabled,classes:t.classes,style:t.style}),r.element.mount(n),r.errorElement=document.createElement("div"),r.errorElement.className=t.error.class,n.insertAdjacentElement("afterend",r.errorElement),r.element.on("change",r.onchange.bind(r)),r.element.on("change",r.dispatchEvent.bind(r,"change")),r.element.on("ready",r.dispatchEvent.bind(r,"ready")),r.element.on("focus",r.dispatchEvent.bind(r,"focus")),r.element.on("blur",r.dispatchEvent.bind(r,"blur")),r.element.on("escape",r.dispatchEvent.bind(r,"escape"))})},update:function(e){this.element&&(this.props["hide-postal-code"]!=e["hide-postal-code"]&&this.element.update({hidePostalCode:this.props["hide-postal-code"]}),this.props["icon-style"]!=e["icon-style"]&&this.element.update({iconStyle:this.props["icon-style"]}),this.props["hide-icon"]!=e["hide-icon"]&&this.element.update({hideIcon:this.props["hide-icon"]}),this.props.disabled!=e.disabled&&this.element.update({disabled:this.props.disabled}))},destroy:function(){this.element&&this.element.destroy()}}),dmx.Component("stripe-card-cvc",{initialData:{complete:!1,empty:!0,error:void 0},attributes:{placeholder:{type:String,default:""},disabled:{type:Boolean,default:!1},"hide-errors":{type:Boolean,default:!1}},methods:{blur:function(){this.element.blur()},clear:function(){this.element.clear()},focus:function(){this.element.focus()}},events:{change:Event,ready:Event,focus:Event,blur:Event,escape:Event},onchange:function(e){this.set(e),this.props["hide-errors"]||(this.errorElement.textContent=e.error?e.error.message:"")},render:function(n){var r=this;dmx.stripe.ready(function(e){var t=dmx.stripe.theme[window.bootstrap?"bootstrap":"default"];r.element=dmx.stripe.elements.create("cardCvc",{placeholder:r.props.placeholder,disabled:r.props.disabled,classes:t.classes,style:t.style}),r.element.mount(n),r.errorElement=document.createElement("div"),r.errorElement.className=t.error.class,n.insertAdjacentElement("afterend",r.errorElement),r.element.on("change",r.onchange.bind(r)),r.element.on("change",r.dispatchEvent.bind(r,"change")),r.element.on("ready",r.dispatchEvent.bind(r,"ready")),r.element.on("focus",r.dispatchEvent.bind(r,"focus")),r.element.on("blur",r.dispatchEvent.bind(r,"blur")),r.element.on("escape",r.dispatchEvent.bind(r,"escape"))})},update:function(e){this.props.placeholder!=e.placeholder&&this.element.update({placeholder:this.props.placeholder}),this.props.disabled!=e.disabled&&this.element.update({disabled:this.props.disabled})},destroy:function(){this.element.destroy()}}),dmx.Component("stripe-card-expiry",{initialData:{complete:!1,empty:!0,error:void 0},attributes:{placeholder:{type:String,default:""},disabled:{type:Boolean,default:!1},"hide-errors":{type:Boolean,default:!1}},methods:{blur:function(){this.element.blur()},clear:function(){this.element.clear()},focus:function(){this.element.focus()}},events:{change:Event,ready:Event,focus:Event,blur:Event,escape:Event},onchange:function(e){this.set(e),this.props["hide-errors"]||(this.errorElement.textContent=e.error?e.error.message:"")},render:function(n){var r=this;dmx.stripe.ready(function(e){var t=dmx.stripe.theme[window.bootstrap?"bootstrap":"default"];r.element=dmx.stripe.elements.create("cardExpiry",{placeholder:r.props.placeholder,disabled:r.props.disabled,classes:t.classes,style:t.style}),r.element.mount(n),r.errorElement=document.createElement("div"),r.errorElement.className=t.error.class,n.insertAdjacentElement("afterend",r.errorElement),r.element.on("change",r.onchange.bind(r)),r.element.on("change",r.dispatchEvent.bind(r,"change")),r.element.on("ready",r.dispatchEvent.bind(r,"ready")),r.element.on("focus",r.dispatchEvent.bind(r,"focus")),r.element.on("blur",r.dispatchEvent.bind(r,"blur")),r.element.on("escape",r.dispatchEvent.bind(r,"escape"))})},update:function(e){this.props.placeholder!=e.placeholder&&this.element.update({placeholder:this.props.placeholder}),this.props.disabled!=e.disabled&&this.element.update({disabled:this.props.disabled})},destroy:function(){this.element.destroy()}}),dmx.Component("stripe-card-number",{initialData:{complete:!1,brand:"",empty:!0,error:void 0,paymentMethod:void 0,paymentIntent:void 0,setupIntent:void 0},attributes:{placeholder:{type:String,default:""},"icon-style":{type:String,default:"default"},"show-icon":{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},"hide-errors":{type:Boolean,default:!1}},methods:{blur:function(){this.element.blur()},clear:function(){this.element.clear()},focus:function(){this.element.focus()},createPaymentMethod:function(){if(this.element){var t=this;return dmx.stripe.instance.createPaymentMethod({type:"card",card:this.element}).then(function(e){return e.error?(t.set("error",e.error),t.dispatchEvent("error")):(t.set("paymentMethod",e.paymentMethod),t.dispatchEvent("payment_method_created")),e})}},confirmPayment:function(e){if(this.element){var t=this;return dmx.stripe.instance.confirmCardPayment(e,{payment_method:{card:this.element}}).then(function(e){return e.error?(t.set("error",e.error),t.dispatchEvent("error")):(t.set("paymentIntent",e.paymentIntent),t.dispatchEvent("payment_confirmed")),e})}},confirmSetup:function(e){if(this.element){var t=this;return dmx.stripe.instance.confirmCardSetup(e,{payment_method:{card:this.element}}).then(function(e){return e.error?(t.set("error",e.error),t.dispatchEvent("error")):(t.set("setupIntent",e.setupIntent),t.dispatchEvent("setup_confirmed")),e})}}},events:{change:Event,ready:Event,focus:Event,blur:Event,escape:Event},onchange:function(e){this.set(e),this.props["hide-errors"]||(this.errorElement.textContent=e.error?e.error.message:"")},render:function(n){var r=this;dmx.stripe.ready(function(e){var t=dmx.stripe.theme[window.bootstrap?"bootstrap":"default"];r.element=dmx.stripe.elements.create("cardNumber",{placeholder:r.props.placeholder,iconStyle:r.props["icon-style"],showIcon:r.props["show-icon"],disabled:r.props.disabled,classes:t.classes,style:t.style}),r.element.mount(n),r.errorElement=document.createElement("div"),r.errorElement.className=t.error.class,n.insertAdjacentElement("afterend",r.errorElement),r.element.on("change",r.onchange.bind(r)),r.element.on("change",r.dispatchEvent.bind(r,"change")),r.element.on("ready",r.dispatchEvent.bind(r,"ready")),r.element.on("focus",r.dispatchEvent.bind(r,"focus")),r.element.on("blur",r.dispatchEvent.bind(r,"blur")),r.element.on("escape",r.dispatchEvent.bind(r,"escape"))})},update:function(e){this.props.placeholder!=e.placeholder&&this.element.update({placeholder:this.props.placeholder}),this.props["icon-style"]!=e["icon-style"]&&this.element.update({iconStyle:this.props["icon-style"]}),this.props["show-icon"]!=e["show-icon"]&&this.element.update({showIcon:this.props["show-icon"]}),this.props.disabled!=e.disabled&&this.element.update({disabled:this.props.disabled})},destroy:function(){this.element.destroy()}}),dmx.Component("stripe-eps-bank",{initialData:{complete:!1,empty:!0,value:"",error:void 0,source:void 0,paymentMethod:void 0,paymentIntent:void 0},attributes:{value:{type:String,default:""},"hide-icon":{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},"return-url":{type:String,default:window.location.href},"hide-errors":{type:Boolean,default:!1},"accountholder-name":{type:String,default:""}},methods:{blur:function(){this.element&&this.element.blur()},clear:function(){this.element&&this.element.clear()},focus:function(){this.element&&this.element.focus()},createSource:function(e){if(this.element){var t=this;return dmx.stripe.instance.createSource(this.element,e).then(function(e){return e.error?(t.set("error",e.error),t.dispatchEvent("error")):(t.set("source",e.source),t.dispatchEvent("source_created")),e})}},createPaymentMethod:function(){if(this.element){var t=this;return dmx.stripe.instance.createPaymentMethod({type:"eps",eps:this.element}).then(function(e){return e.error?(t.set("error",e.error),t.dispatchEvent("error")):(t.set("paymentMethod",e.paymentMethod),t.dispatchEvent("payment_method_created")),e})}},confirmPayment:function(e){if(this.element){var t=this;return dmx.stripe.instance.confirmEpsPayment(e||dmx.stripe.client_secret,{payment_method:{eps:this.element,billing_details:{name:this.props["accountholder-name"]}},return_url:this.props["return-url"]}).then(function(e){return e.error?(t.set("error",e.error),t.dispatchEvent("error")):(t.set("paymentIntent",e.paymentIntent),t.dispatchEvent("payment_confirmed")),e})}}},events:{change:Event,ready:Event,focus:Event,blur:Event,escape:Event,error:Event,source_created:Event,payment_method_created:Event,payment_confirmed:Event},onchange:function(e){this.set(e),this.props["hide-errors"]||(this.errorElement.textContent=e.error?e.error.message:"")},render:function(n){var r=this;dmx.stripe.ready(function(e){var t=dmx.stripe.theme[window.bootstrap?"bootstrap":"default"];r.element=dmx.stripe.elements.create("epsBank",{value:r.props.value,hideIcon:r.props["hide-icon"],disabled:r.props.disabled,classes:t.classes,style:t.style}),r.element.mount(n),r.errorElement=document.createElement("div"),r.errorElement.className=t.error.class,n.insertAdjacentElement("afterend",r.errorElement),r.element.on("change",r.set.bind(r)),r.element.on("change",r.dispatchEvent.bind(r,"change")),r.element.on("ready",r.dispatchEvent.bind(r,"ready")),r.element.on("focus",r.dispatchEvent.bind(r,"focus")),r.element.on("blur",r.dispatchEvent.bind(r,"blur")),r.element.on("escape",r.dispatchEvent.bind(r,"escape"))})},update:function(e){this.element&&(this.props.value!=e.value&&this.element.update({value:this.props.value}),this.props["hide-icon"]!=e["hide-icon"]&&this.element.update({hideIcon:this.props["hide-icon"]}),this.props.disabled!=e.disabled&&this.element.update({disabled:this.props.disabled}))},destroy:function(){this.element&&this.element.destroy()}}),dmx.Component("stripe-fpx-bank",{initialData:{complete:!1,empty:!0,error:void 0,source:void 0,paymentMethod:void 0,paymentIntent:void 0},attributes:{value:{type:String,default:""},"account-holder-type":{type:String,default:""},disabled:{type:Boolean,default:!1},"return-url":{type:String,default:window.location.href}},methods:{blur:function(){this.element&&this.element.blur()},clear:function(){this.element&&this.element.clear()},focus:function(){this.element&&this.element.focus()},createSource:function(e){if(this.element){var t=this;return dmx.stripe.instance.createSource(this.element,e).then(function(e){return e.error?(t.set("error",e.error),t.dispatchEvent("error")):(t.set("source",e.source),t.dispatchEvent("source_created")),e})}},createPaymentMethod:function(){if(this.element){var t=this;return dmx.stripe.instance.createPaymentMethod({type:"fpx",fpx:this.element}).then(function(e){return e.error?(t.set("error",e.error),t.dispatchEvent("error")):(t.set("paymentMethod",e.paymentMethod),t.dispatchEvent("payment_method_created")),e})}},confirmPayment:function(e){if(this.element){var t=this;return dmx.stripe.instance.confirmFpxPayment(e||dmx.stripe.client_secret,{payment_method:{fpx:this.element},return_url:this.props["return-url"]}).then(function(e){return e.error?(t.set("error",e.error),t.dispatchEvent("error")):(t.set("paymentIntent",e.paymentIntent),t.dispatchEvent("payment_confirmed")),e})}}},events:{change:Event,ready:Event,focus:Event,blur:Event,escape:Event,error:Event,source_created:Event,payment_method_created:Event,payment_confirmed:Event},onchange:function(e){this.set(e),this.props["hide-errors"]||(this.errorElement.textContent=e.error?e.error.message:"")},render:function(n){var r=this;dmx.stripe.ready(function(e){var t=dmx.stripe.theme[window.bootstrap?"bootstrap":"default"];r.element=dmx.stripe.elements.create("fpxBank",{value:r.props.value,accountHolderType:r.props["account-holder-type"],disabled:r.props.disabled,classes:t.classes,style:t.style}),r.element.mount(n),r.errorElement=document.createElement("div"),r.errorElement.className=t.error.class,n.insertAdjacentElement("afterend",r.errorElement),r.element.on("change",r.onchange.bind(r)),r.element.on("change",r.dispatchEvent.bind(r,"change")),r.element.on("ready",r.dispatchEvent.bind(r,"ready")),r.element.on("focus",r.dispatchEvent.bind(r,"focus")),r.element.on("blur",r.dispatchEvent.bind(r,"blur")),r.element.on("escape",r.dispatchEvent.bind(r,"escape"))})},update:function(e){this.element&&(this.props.value!=e.value&&this.element.update({value:this.props.value}),this.props["account-holder-type"]!=e["account-holder-type"]&&this.element.update({accountHolderType:this.props["account-holder-type"]}),this.props.disabled!=e.disabled&&this.element.update({disabled:this.props.disabled}))},destroy:function(){this.element&&this.element.destroy()}}),dmx.Component("stripe-iban",{initialData:{complete:!1,country:"",bankName:"",empty:!0,error:void 0,source:void 0,paymentMethod:void 0,paymentIntent:void 0,setupIntent:void 0},attributes:{"supported-countries":{type:Array,default:["SEPA"]},"placeholder-country":{type:String,default:""},"icon-style":{type:String,default:"default",enum:["default","solid"]},"hide-icon":{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},"hide-errors":{type:Boolean,default:!1},"accountholder-name":{type:String,default:""}},methods:{blur:function(){this.element&&this.element.blur()},clear:function(){this.element&&this.element.clear()},focus:function(){this.element&&this.element.focus()},createSource:function(e){if(this.element){var t=this;return dmx.stripe.instance.createSource(this.element,e).then(function(e){return e.error?(t.set("error",e.error),t.dispatchEvent("error")):(t.set("source",e.source),t.dispatchEvent("source_created")),e})}},createPaymentMethod:function(){if(this.element){var t=this;return dmx.stripe.instance.createPaymentMethod({type:"sepa_debit",sepa_debit:this.element}).then(function(e){return e.error?(t.set("error",e.error),t.dispatchEvent("error")):(t.set("paymentMethod",e.paymentMethod),t.dispatchEvent("payment_method_created")),e})}},confirmPayment:function(e){if(this.element){var t=this;return dmx.stripe.instance.confirmSepaDebitPayment(e||dmx.stripe.client_secret,{payment_method:{sepa_debit:this.element,billing_details:{name:this.props["accountholder-name"]}}}).then(function(e){return e.error?(t.set("error",e.error),t.dispatchEvent("error")):(t.set("paymentIntent",e.paymentIntent),t.dispatchEvent("payment_confirmed")),e})}},confirmSetup:function(e){if(this.element){var t=this;return dmx.stripe.instance.confirmSepaDebitSetup(e||dmx.stripe.client_secret,{payment_method:{sepa_debit:this.element,billing_details:{name:this.props["accountholder-name"]}}}).then(function(e){return e.error?(t.set("error",e.error),t.dispatchEvent("error")):(t.set("setupIntent",e.setupIntent),t.dispatchEvent("setup_confirmed")),e})}}},events:{change:Event,ready:Event,focus:Event,blur:Event,escape:Event,error:Event,source_created:Event,payment_method_created:Event,payment_confirmed:Event,setup_confirmed:Event},onchange:function(e){this.set(e),this.props["hide-errors"]||(this.errorElement.textContent=e.error?e.error.message:"")},render:function(n){var r=this;dmx.stripe.ready(function(e){var t=dmx.stripe.theme[window.bootstrap?"bootstrap":"default"];r.element=dmx.stripe.elements.create("iban",{supportedCountries:r.props["supported-countries"],placeholderCountry:r.props["placeholder-country"],iconStyle:r.props["icon-style"],hideIcon:r.props["hide-icon"],disabled:r.props.disabled,classes:t.classes,style:t.style}),r.element.mount(n),r.errorElement=document.createElement("div"),r.errorElement.className=t.error.class,n.insertAdjacentElement("afterend",r.errorElement),r.element.on("change",r.onchange.bind(r)),r.element.on("change",r.dispatchEvent.bind(r,"change")),r.element.on("ready",r.dispatchEvent.bind(r,"ready")),r.element.on("focus",r.dispatchEvent.bind(r,"focus")),r.element.on("blur",r.dispatchEvent.bind(r,"blur")),r.element.on("escape",r.dispatchEvent.bind(r,"escape"))})},update:function(e){this.element&&(this.props["supported-countries"]!=e["supported-countries"]&&this.element.update({supportedCountries:this.props["supported-countries"]}),this.props["placeholder-country"]!=e["placeholder-country"]&&this.element.update({placeholderCountry:this.props["placeholder-country"]}),this.props["icon-style"]!=e["icon-style"]&&this.element.update({iconStyle:this.props["icon-style"]}),this.props["hide-icon"]!=e["hide-icon"]&&this.element.update({hideIcon:this.props["hide-icon"]}),this.props.disabled!=e.disabled&&this.element.update({disabled:this.props.disabled}))},destroy:function(){this.element&&this.element.destroy()}}),dmx.Component("stripe-ideal-bank",{initialData:{complete:!1,empty:!0,value:"",error:void 0,source:void 0,paymentMethod:void 0,paymentIntent:void 0,setupIntent:void 0},attributes:{value:{type:String,default:""},"hide-icon":{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},"return-url":{type:String,default:window.location.href},"hide-errors":{type:Boolean,default:!1},"accountholder-name":{type:String,default:""}},methods:{blur:function(){this.element&&this.element.blur()},clear:function(){this.element&&this.element.clear()},focus:function(){this.element&&this.element.focus()},createSource:function(e){if(this.element){var t=this;return dmx.stripe.instance.createSource(this.element,e).then(function(e){return e.error?(t.set("error",e.error),t.dispatchEvent("error")):(t.set("source",e.source),t.dispatchEvent("source_created")),e})}},createPaymentMethod:function(){if(this.element){var t=this;return dmx.stripe.instance.createPaymentMethod({type:"ideal",ideal:this.element}).then(function(e){return e.error?(t.set("error",e.error),t.dispatchEvent("error")):(t.set("paymentMethod",e.paymentMethod),t.dispatchEvent("payment_method_created")),e})}},confirmPayment:function(e){if(this.element){var t=this;return dmx.stripe.instance.confirmIdealPayment(e||dmx.stripe.client_secret,{payment_method:{ideal:this.element,billing_details:{name:this.props["accountholder-name"]}},return_url:this.props["return-url"]}).then(function(e){return e.error?(t.set("error",e.error),t.dispatchEvent("error")):(t.set("paymentIntent",e.paymentIntent),t.dispatchEvent("payment_confirmed")),e})}},confirmSetup:function(e){if(this.element){var t=this;return dmx.stripe.instance.confirmIdealSetup(e||dmx.stripe.client_secret,{payment_method:{ideal:this.element,billing_details:{name:this.props["accountholder-name"]}}}).then(function(e){return e.error?(t.set("error",e.error),t.dispatchEvent("error")):(t.set("setupIntent",e.setupIntent),t.dispatchEvent("setup_created")),e})}}},events:{change:Event,ready:Event,focus:Event,blur:Event,escape:Event,error:Event,source_created:Event,payment_method_create:Event,payment_confirmed:Event,setup_confirmed:Event},onchange:function(e){this.set(e),this.props["hide-errors"]||(this.errorElement.textContent=e.error?e.error.message:"")},render:function(n){var r=this;dmx.stripe.ready(function(e){var t=dmx.stripe.theme[window.bootstrap?"bootstrap":"default"];r.element=dmx.stripe.elements.create("idealBank",{value:r.props.value,hideIcon:r.props["hide-icon"],disabled:r.props.disabled,classes:t.classes,style:t.style}),r.element.mount(n),r.errorElement=document.createElement("div"),r.errorElement.className=t.error.class,n.insertAdjacentElement("afterend",r.errorElement),r.element.on("change",r.onchange.bind(r)),r.element.on("change",r.dispatchEvent.bind(r,"change")),r.element.on("ready",r.dispatchEvent.bind(r,"ready")),r.element.on("focus",r.dispatchEvent.bind(r,"focus")),r.element.on("blur",r.dispatchEvent.bind(r,"blur")),r.element.on("escape",r.dispatchEvent.bind(r,"escape"))})},update:function(e){this.element&&(this.props.value!=e.value&&this.element.update({value:this.props.value}),this.props["hide-icon"]!=e["hide-icon"]&&this.element.update({hideIcon:this.props["hide-icon"]}),this.props.disabled!=e.disabled&&this.element.update({disabled:this.props.disabled}))},destroy:function(){this.element&&this.element.destroy()}}),dmx.Component("stripe-p24-bank",{initialData:{complete:!1,empty:!0,value:"",error:void 0,source:void 0,paymentMethod:void 0,paymentIntent:void 0},attributes:{value:{type:String,default:""},"hide-icon":{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},"return-url":{type:String,default:window.location.href},"hide-errors":{type:Boolean,default:!1},"accountholder-name":{type:String,default:""},"tos-shown-and-accepted":{type:Boolean,default:!1}},methods:{blur:function(){this.element&&this.element.blur()},clear:function(){this.element&&this.element.clear()},focus:function(){this.element&&this.element.focus()},createSource:function(e){if(this.element){var t=this;return dmx.stripe.instance.createSource(this.element,e).then(function(e){return e.error?(t.set("error",e.error),t.dispatchEvent("error")):(t.set("source",e.source),t.dispatchEvent("source_created")),e})}},createPaymentMethod:function(e){if(this.element){var t=this;return dmx.stripe.instance.createPaymentMethod({type:"p24",p24:this.element}).then(function(e){return e.error?(t.set("error",e.error),t.dispatchEvent("error")):(t.set("paymentMethod",e.paymentMethod),t.dispatchEvent("payment_method_created")),e})}},confirmPayment:function(e){var t=this;this.element&&dmx.stripe.instance.confirmP24Payment(e||dmx.stripe.client_secret,{payment_method:{p24:this.element,billing_details:{name:this.props["accountholder-name"]}},payment_method_options:{p24:{tos_shown_and_accepted:this.props["tos-shown-and-accepted"]}},return_url:this.props["return-url"]}).then(function(e){e.error&&t.set("error",e.error),t.set("paymentIntent",e.paymentIntent)})}},events:{change:Event,ready:Event,focus:Event,blur:Event,escape:Event,error:Event,source_created:Event,payment_method_created:Event,payment_confirmed:Event},onchange:function(e){this.set(e),this.props["hide-errors"]||(this.errorElement.textContent=e.error?e.error.message:"")},render:function(n){var r=this;dmx.stripe.ready(function(e){var t=dmx.stripe.theme[window.bootstrap?"bootstrap":"default"];r.element=dmx.stripe.elements.create("p24Bank",{value:r.props.value,hideIcon:r.props["hide-icon"],disabled:r.props.disabled,classes:t.classes,style:t.style}),r.element.mount(n),r.errorElement=document.createElement("div"),r.errorElement.className=t.error.class,n.insertAdjacentElement("afterend",r.errorElement),r.element.on("change",r.onchange.bind(r)),r.element.on("change",r.dispatchEvent.bind(r,"change")),r.element.on("ready",r.dispatchEvent.bind(r,"ready")),r.element.on("focus",r.dispatchEvent.bind(r,"focus")),r.element.on("blur",r.dispatchEvent.bind(r,"blur")),r.element.on("escape",r.dispatchEvent.bind(r,"escape"))})},update:function(e){this.element&&(this.props.value!=e.value&&this.element.update({value:this.props.value}),this.props["hide-icon"]!=e["hide-icon"]&&this.element.update({hideIcon:this.props["hide-icon"]}),this.props.disabled!=e.disabled&&this.element.update({disabled:this.props.disabled}))},destroy:function(){this.element&&this.element.destroy()}}),dmx.Component("stripe-payment-request-button",{initialData:{token:null,source:null,paymentMethod:null,shippingAddress:null,shippingOption:null},attributes:{country:{type:String,default:""},currency:{type:String,default:""},label:{type:String,default:""},amount:{type:Number,default:null},pending:{type:Boolean,default:!1},items:{type:Array,default:null},"request-name":{type:Boolean,default:!1},"request-email":{type:Boolean,default:!1},"request-phone":{type:Boolean,default:!1},"request-shipping":{type:Boolean,default:!1},"shipping-options":{type:Array,default:null}},methods:{complete:function(){this.complete&&this.complete()},updateWith:function(e){this.updateWith&&this.updateWith(e)}},events:{click:Event,token:Event,source:Event,paymentmethod:Event,shippingoptionchange:Event},render:function(t){var n=this;dmx.stripe.ready(function(e){n.paymentRequest=dmx.stripe.paymentRequest({country:n.props.country,currency:n.props.currency,total:{label:n.props.label,amount:n.props.amount,pending:n.props.pending},displayItems:n.props.items,requestPayerName:n.props["request-name"],requestPayerEmail:n.props["request-email"],requestPayerPhone:n.props["request-phone"],requestShipping:n.props["request-shipping"],shippingOptions:n.props["shipping-options"]}),n.paymentRequest.on("token",function(e){n.set("token",e.token),n.dispatchEvent("token"),n.complete=e.complete}),n.paymentRequest.on("source",function(e){n.set("source",e.source),n.dispatchEvent("source"),n.complete=e.complete}),n.paymentRequest.on("paymentmethod",function(e){n.set("paymentMethod",e.paymentMethod),n.dispatchEvent("paymentmethod"),n.complete=e.complete}),n.paymentRequest.on("shippingoptionchange",function(e){n.set("shippingOption",e.shippingOption),n.dispatchEvent("shippingoptionchange"),n.updateWith=e.updateWith}),n.paymentRequest.on("shippingaddresschange",function(e){n.set("shippingAddress",e.shippingAddress),n.dispatchEvent("shippingaddresschange"),n.updateWith=e.updateWith}),n.paymentRequest.on("cancel",n.dispatchEvent.bind(n,"cancel")),n.element=dmx.stripe.elements.create("paymentRequestButton",{paymentRequest:n.paymentRequest}),n.paymentRequest.canMakePayment().then(function(e){e&&(n.element.mount(t),n.element.on("click",n.dispatchEvent.bind(n,"click")))})})},update:function(e){this.paymentRequest&&(dmx.equal(e,this.props)||this.paymentRequest.update({country:this.props.country,currency:this.props.currency,total:{label:this.props.label,amount:this.props.amount,pending:this.props.pending},displayItems:this.props.items,requestPayerName:this.props["request-name"],requestPayerEmail:this.props["request-email"],requestPayerPhone:this.props["request-phone"],requestShipping:this.props["request-shipping"],shippingOptions:this.props["shipping-options"]}))},destroy:function(){this.element&&this.element.destroy()}}),dmx.Component("stripe-afterpay-message",{attributes:{amount:{type:Number,default:null,required:!0},currency:{type:String,default:"USD",enum:["USD","CAD","AUD","NZD","GBP"]},"logo-type":{type:String,default:"badge",enum:["badge","lockup"]},"badge-theme":{type:String,default:"black-on-mint",enum:["black-on-mint","black-on-white","mint-on-black","white-on-black"]},"lockup-theme":{type:String,default:"black",enum:["black","white","mint"]},"modal-theme":{type:String,default:"mint",enum:["mint","white"]},"intro-text":{type:String,default:"In",enum:["In","in","Or","or","Pay","pay","Pay in","pay in"]},"modal-link-style":{type:String,default:"circled-info-icon",enum:["circled-info-icon","learn-more-text","more-info-text"]},"is-not-eligible":{type:Boolean,default:!1},"is-cart-not-eligible":{type:Boolean,default:!1},"hide-interest-free":{type:Boolean,default:!1},"hide-with":{type:Boolean,default:!1},max:{type:Number,default:void 0},min:{type:Number,default:void 0},"hide-lower-limit":{type:Boolean,default:!1},"hide-upper-limit":{type:Boolean,default:!1},"amount-is-float":{type:Boolean,default:!1}},render:function(e){dmx.stripe.ready(function(){this.element=dmx.stripe.elements.create("afterpayClearpayMessage",{amount:(this.props["amount-is-float"]?100:1)*this.props.amount,currency:this.props.currency,logoType:this.props["logo-type"],badgeTheme:this.props["badge-theme"],lockupTheme:this.props["lockup-theme"],modalTheme:this.props["modal-theme"],introText:this.props["intro-text"],modalLinkStyle:this.props["modal-link-style"],isEligible:!this.props["is-not-eligible"],isCartEligible:!this.props["is-cart-not-eligible"],showInterestFree:!this.props["hide-interest-free"],showWith:this.props["hide-with"],max:this.props.max,min:this.props.min,showLowerLimit:!this.props["hide-lower-limit"],showUpperLimit:!this.props["hide-upper-limit"]}),this.element.mount(e)}.bind(this))},destroy:function(){this.element&&this.element.destroy()}}),dmx.Component("stripe-checkout-form",{extends:"form",initialData:{error:null,processing:!1,paymentIntent:null,paymentMethodType:"card"},attributes:{credentials:{type:Boolean,default:!1},autosubmit:{type:Boolean,default:!1},timeout:{type:Number,default:0},"payment-method-type":{type:String,default:"card",enum:["afterpay_clearpay","alipay","au_becs_debit","bancontact","card","eps","fpx","giropay","grabpay","ideal","oxxo","p24","sepa_debit","sofort"]},"prop-client-secret":{type:String,default:"client_secret"},"success-url":{type:String,default:null}},events:{error:Event,success:Event},render:function(e){dmx.Component("form").prototype.render.call(this,e),this.set("paymentMethodType",this.props["payment-method-type"]),this.props.autosubmit&&dmx.nextTick(function(){this.submit()},this)},update:function(e){this.set("paymentMethodType",this.props["payment-method-type"])},_submit:function(){if(!this.data.processing){this.set("error",""),this.set("processing",!0),this._updateErrorDiv("");var n=new FormData(this.$node);this.$node.dmxExtraData&&Object.keys(this.$node.dmxExtraData).forEach(function(t){var e=this.$node.dmxExtraData[t];Array.isArray(e)?(/\[\]$/.test(t)||(t+="[]"),e.forEach(function(e){n.append(t,e)})):n.set(t,e)},this);var e=new XMLHttpRequest;e.open("POST",this.$node.action),e.timeout=1e3*this.props.timeout,e.withCredentials=this.props.credentials,e.onload=this.onload.bind(this,e),e.onabort=this.onabort.bind(this),e.onerror=this.onerror.bind(this),e.ontimeout=this.ontimeout.bind(this);try{e.send(n)}catch(e){this._error(e)}}},_error:function(e){this.set("error",e.message),this.set("processing",!1),this.dispatchEvent("error"),this._updateErrorDiv(e.message)},_updateErrorDiv:function(e){var t=document.getElementById("dmxValidatorError"+this.name);t||((t=document.createElement("div")).id="dmxValidatorError"+this.name,t.className="dmxValidator-error invalid-feedback",this.$node.append(t)),t.textContent=e},_success:function(e){this.set("paymentIntent",e),this.set("processing",!1),this.dispatchEvent("success"),this.props["success-url"]&&document.location.replace(this.props["success-url"])},_handleResult:function(e){e.error?this._error(e.error):this._success(e.paymentIntent)},onload:function(e){try{var t=this,n=!1;if(this.children.forEach(function(e){e instanceof dmx.Component("stripe-payment-method")&&(t.props["payment-method-type"]=e.data.selected,n=!0)}),!n){var r=this.$node.querySelector("dmx-stripe-payment-method, [is=dmx-stripe-payment-method]");r&&r.dmxComponent&&(this.props["payment-method-type"]=r.dmxComponent.data.selected)}}catch(e){console.error(e)}try{var i=JSON.parse(e.responseText);if(200==e.status){var s=i[this.props["prop-client-secret"]];if(!s)throw new Error(i.error||i.responseText);switch(this.props["payment-method-type"]){case"card":dmx.stripe.instance.confirmCardPayment(s,{payment_method:{card:dmx.stripe.elements.getElement("card")||dmx.stripe.elements.getElement("cardNumber")}}).then(this._handleResult.bind(this)).catch(this._error.bind(this));break;case"afterpay_clearpay":dmx.stripe.instance.confirmAfterpayClearpayPayment(s,{return_url:this.props["success-url"]}).then(this._handleResult.bind(this)).catch(this._error.bind(this));break;case"alipay":dmx.stripe.instance.confirmAlipayPayment(s,{return_url:this.props["success-url"]}).then(this._handleResult.bind(this)).catch(this._error.bind(this));break;case"au_becs_debit":dmx.stripe.instance.confirmAuBecsDebitPayment(s,{payment_method:{au_becs_debit:dmx.stripe.elements.getElement("auBankAccount")}}).then(this._handleResult.bind(this)).catch(this._error.bind(this));break;case"bancontact":dmx.stripe.instance.confirmBancontactPayment(s,{return_url:this.props["success-url"]}).then(this._handleResult.bind(this)).catch(this._error.bind(this));break;case"eps":dmx.stripe.instance.confirmEpsPayment(s,{return_url:this.props["success-url"]}).then(this._handleResult.bind(this)).catch(this._error.bind(this));break;case"fpx":dmx.stripe.instance.confirmFpxPayment(s,{payment_method:{fpx:dmx.stripe.elements.getElement("fpxBank")},return_url:this.props["success-url"]}).then(this._handleResult.bind(this)).catch(this._error.bind(this));break;case"giropay":dmx.stripe.instance.confirmGiropayPayment(s,{return_url:this.props["success-url"]}).then(this._handleResult.bind(this)).catch(this._error.bind(this));break;case"grabpay":dmx.stripe.instance.confirmGrabPayPayment(s,{return_url:this.props["success-url"]}).then(this._handleResult.bind(this)).catch(this._error.bind(this));break;case"ideal":dmx.stripe.instance.confirmIdealPayment(s,{payment_method:{ideal:dmx.stripe.elements.getElement("idealBank")},return_url:this.props["success-url"]}).then(this._handleResult.bind(this)).catch(this._error.bind(this));break;case"oxxo":dmx.stripe.instance.confirmOxxoPayment(s).then(this._handleResult.bind(this)).catch(this._error.bind(this));break;case"p24":dmx.stripe.instance.confirmP24Payment(s,{payment_method:{p24:dmx.stripe.elements.getElement("p24Bank")},return_url:this.props["success-url"]}).then(this._handleResult.bind(this)).catch(this._error.bind(this));break;case"sepa_debit":dmx.stripe.instance.confirmSepaDebitPayment(s,{payment_method:{p24:dmx.stripe.elements.getElement("iban")}}).then(this._handleResult.bind(this)).catch(this._error.bind(this));break;case"sofort":dmx.stripe.instance.confirmSofortPayment(s,{return_url:this.props["success-url"]}).then(this._handleResult.bind(this)).catch(this._error.bind(this))}}else this._error({message:"Request returned with status "+e.status+"."})}catch(e){this._error(e)}},onabort:function(){this._error({message:"The request was aborted."})},onerror:function(e){this._error(e)},ontimeout:function(){this._error({message:"The request timed out."})}}),dmx.Component("stripe-payment-method",{initialData:{selected:"card"},attributes:{"payment-methods":{type:Array,default:["card"],enum:["afterpay_clearpay","alipay","au_becs_debit","bancontact","card","eps","fpx","giropay","grabpay","ideal","oxxo","p24","sepa_debit","sofort"]},selected:{type:String,default:"card",enum:["afterpay_clearpay","alipay","au_becs_debit","bancontact","card","eps","fpx","giropay","grabpay","ideal","oxxo","p24","sepa_debit","sofort"]},display:{type:String,default:"select",enum:["select","pills","tabs","buttons"]},"hide-postal-code":{type:Boolean,default:!1},"icon-style":{type:String,default:"default",enum:["solid","default"]},"hide-icon":{type:Boolean,default:!1},"hide-errors":{type:Boolean,default:!1},"account-holder-type":{type:String,default:"individual",enum:["company","individual"]},"locale-afterpay_clearpay":{type:String,default:"Afterpay"},"locale-alipay":{type:String,default:"Alipay"},"locale-au_becs_debit":{type:String,default:"BECS debit"},"locale-bancontact":{type:String,default:"Bancontact"},"locale-card":{type:String,default:"Card"},"locale-eps":{type:String,default:"EPS"},"locale-fpx":{type:String,default:"FPX"},"locale-giropay":{type:String,default:"Giropay"},"locale-grabpay":{type:String,default:"GrabPay"},"locale-ideal":{type:String,default:"iDEAL"},"locale-oxxo":{type:String,default:"OXXO"},"locale-p24":{type:String,default:"Przelewy24"},"locale-sepa_debit":{type:String,default:"SEPA debit"},"locale-sofort":{type:String,default:"Sofort"},"locale-fpx-conditions":{type:String,default:"By Proceding, you agree to FPXs Terms and Conditions."},"locale-sepa_debit-mandate":{type:String,default:"By providing your payment information and confirming this payment, you authorise (A) {{company}} and Stripe, our payment service provider, to send instructions to your bank to debit your account and (B) your bank to debit your account in accordance with those instructions. As part of your rights, you are entitled to a refund from your bank under the terms and conditions of your agreement with your bank. A refund must be claimed within 8 weeks starting from the date on which your account was debited. Your rights are explained in a statement that you can obtain from your bank. You agree to receive notifications for future debits up to 2 days before they occur."},"locale-au_becs_debit-mandate":{type:String,default:"By providing your bank account details and confirming this payment, you agree to this Direct Debit Request and the Direct Debit Request service agreement, Direct Debit Request service agreement, and authorise Stripe Payments Australia Pty Ltd ACN 160 180 343 Direct Debit User ID number 507156 (Stripe) to debit your account through the Bulk Electronic Clearing System (BECS) on behalf of (the Merchant) for any amounts separately communicated to you by the Merchant. You certify that you are either an account holder or an authorised signatory on the account listed above."},"locale-company":{type:String,default:"Us"}},methods:{select:function(e){this._select(e)}},render:function(e){this._render()},update:function(e){this.props.display==e.display&&dmx.equal(this.props["payment-methods"],e["payment-methods"])?this.props.selected!=e.selected&&this._select(this.props.selected):this._render()},_bootstrapVersion:function(){return window.bootstrap&&bootstrap.Alert?parseInt(bootstrap.Alert.VERSION):0},_select:function(e){if(this.props["payment-methods"].includes(e))switch(this.props.display){case"pills":case"tabs":break;case"buttons":var t=this.$node.querySelector("input[value="+e+"]");t&&t.click();break;default:var n=this.$node.querySelector("select");n&&(n.value=e)}},_render:function(){var d=this,t="",n=this._bootstrapVersion();if("string"==typeof this.props["payment-methods"]&&(this.props["payment-methods"]=this.props["payment-methods"].split(",")),Array.isArray(this.props["payment-methods"])){switch(this.props.display){case"pills":case"tabs":t+='<ul class="nav nav-'+this.props.display+'">',this.props["payment-methods"].forEach(function(e){t+='<li class="nav-item">',t+=4==n?'<a value="'+e+'" class="nav-link'+(e==d.props.selected?" active":"")+'" data-toggle="tab" data-target="#payment-method-'+e+'">'+d.props["locale-"+e]+"</a>":'<button value="'+e+'" class="nav-link'+(e==d.props.selected?" active":"")+'" data-bs-toggle="tab" data-bs-target="#payment-method-'+e+'">'+d.props["locale-"+e]+"</button>",t+="</li>"}),t+="</ul>";break;case"buttons":4==n?(t+='<div class="btn-group btn-group-toggle" data-toggle="buttons" role="group">',this.props["payment-methods"].forEach(function(e){t+='<label class="btn btn-secondary'+(e==d.props.selected?" active":"")+'">',t+='<input type="radio" name="paymentmethod" value="'+e+'"'+(e==d.props.selected?" checked":"")+">",t+=d.props["locale-"+e],t+="</label>"})):(t+='<div class="btn-group" role="group">',this.props["payment-methods"].forEach(function(e){t+='<input type="radio" class="btn-check" name="paymentmethod" value="'+e+'" id="paymentmethod_'+e+'" autocomplete="off"'+(e==d.props.selected?" checked":"")+">",t+='<label class="btn btn-outline-primary" for="paymentmethod_'+e+'">'+d.props["locale-"+e]+"</label>"})),t+="</div>";break;default:t+=4==n?'<select class="form-control">':'<select class="form-select">',this.props["payment-methods"].forEach(function(e){t+='<option value="'+e+'"'+(e==d.props.selected?" selected":"")+">"+d.props["locale-"+e]+"</option>"}),t+="</select>",t+="</div>"}switch(t+='<div class="tab-content my-3">',this.props["payment-methods"].forEach(function(e){t+='<div id="payment-method-'+e+'" class="tab-pane'+(e==d.props.selected?" active":"")+'">',t+='<div id="'+e+'-element"></div>',t+='<div id="'+e+'-error" class="invalid-feedback"></div>',t+='<div id="'+e+'-mandate"></div>',t+="</div>"}),t+="</div>",this.$node.innerHTML=t,this.props.display){case"pills":case"tabs":if(4==n)$('a[data-toggle="tab"]',this.$node).on("shown.bs.tab",function(e){d.set("selected",e.target.getAttribute("value"))});else this.$node.querySelector(".nav").addEventListener("shown.bs.tab",function(e){d.set("selected",e.target.getAttribute("value"))});break;case"buttons":if(4==n)for(var e=this.$node.querySelectorAll("input"),r=0;r<e.length;r++)e[r].onchange=function(e){var t=d.$node.querySelector("input:checked");d.set("selected",t.value),d.$node.querySelector(".tab-content .active").classList.remove("active"),document.getElementById("payment-method-"+t.value).classList.add("active")};else for(e=this.$node.querySelectorAll("input"),r=0;r<e.length;r++)e[r].onchange=function(e){var t=d.$node.querySelector("input:checked");d.set("selected",t.value),d.$node.querySelector(".active").classList.remove("active"),document.getElementById("payment-method-"+t.value).classList.add("active")};break;default:var i=this.$node.querySelector("select");i.onchange=function(e){d.set("selected",i.value),d.$node.querySelector(".active").classList.remove("active"),document.getElementById("payment-method-"+i.value).classList.add("active")}}this.props["payment-methods"].forEach(function(n){var e=dmx.stripe.theme.bootstrap.classes,t=dmx.stripe.theme.bootstrap.style;switch(n){case"card":var r=dmx.stripe.elements.getElement("card");r||((r=dmx.stripe.elements.create("card",{classes:e,style:t,hidePostalCode:this.props["hide-postal-code"],iconStyle:this.props["icon-style"],hideIcon:this.props["hide-icon"]})).mount("#"+n+"-element"),r.on("change",function(e){if(!d.props["hide-errors"]){var t=document.getElementById(n+"-error");e.error?t.textContent=e.error.message:t.textContent=""}}));break;case"au_becs_debit":var i=dmx.stripe.elements.getElement("auBankAccount");i||((i=dmx.stripe.elements.create("auBankAccount",{classes:e,style:t,iconStyle:this.props["icon-style"],hideIcon:this.props["hide-icon"]})).mount("#"+n+"-element"),i.on("change",function(e){if(!d.props["hide-errors"]){var t=document.getElementById(n+"-error");e.error?t.textContent=e.error.message:t.textContent=""}})),document.getElementById(n+"-mandate").textContent=this.props["locale-"+n+"-mandate"].replace("{{company}}",this.props["locale-company"]),document.getElementById(n+"-mandate").className="alert alert-info mt-3";break;case"sepa_debit":var s=dmx.stripe.elements.getElement("iban");s||((s=dmx.stripe.elements.create("iban",{classes:e,style:t,supportedCountries:["SEPA"],iconStyle:this.props["icon-style"],hideIcon:this.props["hide-icon"]})).mount("#"+n+"-element"),s.on("change",function(e){if(!d.props["hide-errors"]){var t=document.getElementById(n+"-error");e.error?t.textContent=e.error.message:t.textContent=""}})),document.getElementById(n+"-mandate").textContent=this.props["locale-"+n+"-mandate"].replace("{{company}}",this.props["locale-company"]),document.getElementById(n+"-mandate").className="alert alert-info mt-3";break;case"ideal":var o=dmx.stripe.elements.getElement("idealBank");o||((o=dmx.stripe.elements.create("idealBank",{classes:e,style:t,hideIcon:this.props["hide-icon"]})).mount("#"+n+"-element"),o.on("change",function(e){if(!d.props["hide-errors"]){var t=document.getElementById(n+"-error");e.error?t.textContent=e.error.message:t.textContent=""}}));break;case"fpx":var a=dmx.stripe.elements.getElement("fpxBank");a||((a=dmx.stripe.elements.create("fpxBank",{classes:e,style:t,accountHolderType:this.props["account-holder-type"]})).mount("#"+n+"-element"),a.on("change",function(e){if(!d.props["hide-errors"]){var t=document.getElementById(n+"-error");e.error?t.textContent=e.error.message:t.textContent=""}})),document.getElementById(n+"-mandate").textContent=this.props["locale-"+n+"-conditions"].replace("{{company}}",this.props["locale-company"]),document.getElementById(n+"-mandate").className="alert alert-info mt-3";break;case"p24":var c=dmx.stripe.elements.getElement("p24Bank");c||((c=dmx.stripe.elements.create("p24Bank",{classes:e,style:t,hideIcon:this.props["hide-icon"]})).mount("#"+n+"-element"),c.on("change",function(e){if(!d.props["hide-errors"]){var t=document.getElementById(n+"-error");e.error?t.textContent=e.error.message:t.textContent=""}}));break;case"eps":var p=dmx.stripe.elements.getElement("epsBank");p||((p=dmx.stripe.elements.create("epsBank",{classes:e,style:t,hideIcon:this.props["hide-icon"]})).mount("#"+n+"-element"),p.on("change",function(e){if(!d.props["hide-errors"]){var t=document.getElementById(n+"-error");e.error?t.textContent=e.error.message:t.textContent=""}}))}},this)}}});
//# sourceMappingURL=../maps/dmxStripe.js.map
