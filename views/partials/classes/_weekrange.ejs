<!-- Wappler include head-page="layouts/layout2" appconnect="local" is="dmx-app" bootstrap5="local" bootstrap_icons="cdn" fontawesome_5="cdn" jquery_35="cdn" moment_2="local with locales" components="{dmxDatePicker:{},dmxFormatter:{},dmxBootstrap5Popovers:{}}" id="w" -->
<div class="row row-cols-1 g-0 mb-3 border-bottom">
    <div class="col d-flex flex-column my-3">
        <div class="row">
            <div class="col-auto align-self-center">
                <button id="btn_todayreset" class="btn btn-dark" dmx-on:click="weekrange_todaydate_picker.setValue(dateAndTime_days.datetime.formatDate('yyyy-MM-dd'))">Today</button>
            </div>
            <div class="col-auto align-self-center d-flex flex-row align-items-center">

                <input id="weekrange_todaydate_picker" class="form-control" name="todaydate" is="dmx-date-picker" placeholder="dd/mm/yyyy" onkeydown="return false" dmx-bind:value="dateAndTime_days.datetime.formatDate('yyyy-MM-dd')" format="Do MMM YYYY" step="7" dmx-bind:maxdate="classesBase.data.nextavail.max_date" dmx-bind:readonly="toggle_classes_loading.checked">
                <i class="fas fa-question-circle fa-fw fa-lg ms-1 text-info clickable" dmx-bs-popover="'Selecting a date here will calculate all classes in the future from this date. <br><strong><small>For example:</small></strong><br>If you select a Tuesday, classes for Monday will be calculated for <em>next week</em> rather than yesterday.'" dmx-bind:popover-title="'Date Selection'" data-bs-html="true" data-bs-trigger="hover"></i>
            </div>
            <div class="col d-flex flex-row justify-content-start">
                <div class="row row-cols-1" id="date_range">
                    <div class="col">
                        <p class="small mb-0">Viewing Week of</p>
                    </div>
                    <div class="col" dmx-show="toggle_classes_loading.checked">
                        <div class="spinner-border spinner-border-sm text-black-50" role="status">
                        </div>
                    </div>
                    <div class="col d-flex flex-row justify-content-start align-items-end" dmx-hide="toggle_classes_loading.checked">
                        <p class="mb-0 fw-bold" dmx-text="classesBase.data.nextavail.startofweek.formatDate('dd MMM yyyy')">
                            06 Jun 2022</p>
                        <p class="mb-0 mx-3 fw-bold">-</p>
                        <p class="mb-0 me-3 fw-bold" dmx-text="classesBase.data.nextavail.endofweek.formatDate('dd MMM yyyy')">
                            12 Jun 2022</p>
                    </div>


                </div>



            </div>
            <div class="col align-self-center d-flex flex-row justify-content-end align-items-center">
                <button id="btn_toggle_classfilters" class="btn btn-primary" dmx-on:click="oc_classFilters.show()"><i class="fas fa-filter me-2"></i>Class Filters
                </button>
            </div>

        </div>
    </div>
</div>
<script>
    document.addEventListener('keyup', function(e) {
        let keyname = e.key;
        if(keyname === 'Escape') {
            dmx.parse("content.weekrange_todaydate_picker.setValue(dateAndTime_days.datetime.formatDate('yyyy-MM-dd'))");
        }
    });
</script>