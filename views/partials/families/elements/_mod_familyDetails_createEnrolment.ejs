<!-- Wappler include is="dmx-app" id="_mod_familyDetails_createEnrolment" appconnect="local" fontawesome_5="cdn" bootstrap5="local" jquery_35="cdn" bootstrap_icons="cdn" head-page="layouts/layout2" components="{dmxBootstrap5Modal:{},dmxFormRepeat:{},dmxDataTraversal:{},dmxStateManagement:{},dmxBootstrap5Tooltips:{},dmxBootstrap5Popovers:{},dmxBootbox5:{},dmxDatePicker:{},dmxValidator:{},dmxAnimateCSS:{},dmxFormatter:{},dmxBootstrap5Collapse:{},dmxBootstrap5Offcanvas:{}}" moment_2="cdn" -->
<script is="dmx-flow" id="flow_modalbg_above_oc" type="text/dmx-flow" src="/app/flows/bootstrap_overrides/modal_above_oc_backdrop.json" dmx-param:modal="'#mod_familyDetails_createEnrolment'" autorun></script>
<script is="dmx-flow" id="flow_dummyJSON" type="text/dmx-flow" src="/app/flows/enrolments/CREATE_DUMMY_ENROL_json.json"></script>

<dmx-data-detail id="dd_familydetails_charge_details" dmx-bind:data="mod_familyDetails_createEnrolment.sc_fd_newenrol_quote.data.exec_tuitioncalc.repeat" key="calculate_charges.chargefor_date">


</dmx-data-detail>
<dmx-data-detail id="data_detail1" dmx-bind:data="mod_familyDetails_createEnrolment.sc_fd_newenrol_quote.data.exec_tuitioncalc.repeat" key="calculate_charges.chargefor_date"></dmx-data-detail>
<dmx-session-manager id="class_filter_store"></dmx-session-manager>



<div class="modal fade" id="mod_familyDetails_createEnrolment" is="dmx-bs5-modal" tabindex="-1" nocloseonclick="true" dmx-on:show-bs-modal="arr_daysfilter.empty();arr_timesfilter.empty();arr_instructorsfilter.empty();arr_levelsfilter.empty();sel_fd_newenrolment_studentpicker.setValue(null);var_enrolmenttype.setValue('null');var_pagecount.setValue(1);sel_fd_newenrolment_enrolmenttype.setValue('active')">
    <div class="modal-dialog modal-xl modal-dialog-scrollable modal-fullscreen-xxl-down" role="document">
        <div class="modal-content">
            <div class="modal-header pdl-main-bg">
                <h5 class="modal-title"><i class="fas fa-plus-circle text-primary fa-fw me-2"></i>
                    <i class="fas fa-book-open fa-fw me-2"></i>Create Enrolment
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body p-4 light-blue-bg">
                <div class="offcanvas offcanvas-end" id="oc_familydetails_charge_details" is="dmx-bs5-offcanvas" tabindex="-1">
                    <div class="offcanvas-header pdl-main-bg">
                        <h5 class="offcanvas-title"><i class="fas fa-hand-holding-usd me-2 text-primary"></i>Charge Details - {{dd_familydetails_charge_details.data.calculate_charges.chargefor_date}}</h5>
                        <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
                    </div>
                    <div class="offcanvas-body">
                        <dmx-serverconnect id="sc_GET_EXISTING_CHARGE_detail" url="/api/families/ledger/charges/GET_CHARGE_detail" noload></dmx-serverconnect>

                    </div>
                </div>
                <dmx-value id="var_pagecount" dmx-bind:value="1"></dmx-value>
                <dmx-value id="var_newenrol_startdate"></dmx-value>
                <dmx-value id="var_enrolmenttype" dmx-bind:value="1"></dmx-value>
                <section dmx-show="mod_familyDetails_createEnrolment.var_pagecount.value==1" class="p-4 bg-white rounded-3" dmx-animate-leave.duration:5000="fadeOut">
                    <dmx-data-detail id="dd_fd_newenrol_selectedstudent" dmx-bind:data="sc_GET_FAMILY_students.data.students" key="uuid"></dmx-data-detail>
                    <dmx-data-detail id="dd_classdetails" dmx-bind:data="mod_familyDetails_createEnrolment.cr_classfilters_studentselected.sc_classeslist.data.nextavail.classes" key="uuid">

                    </dmx-data-detail>
                    <dmx-array id="arr_daysfilter" dmx-on:updated="run({run:{action:`class_filter_store.set(\'fd_newenrol_filter_days\',items.sortarray(false));queryManager.set(\'offset\',0);calendarClasses.load({},true)`}})"></dmx-array>
                    <dmx-array id="arr_timesfilter" dmx-on:updated="run({run:{action:`class_filter_store.set(\'fd_newenrol_filter_times\',items.sortarray(true,\'decimals.startdecimal\'))`}})" dmx-bind:items="class_filter_store.data.fd_newenrol_filter_times"></dmx-array>
                    <dmx-array id="arr_instructorsfilter" dmx-on:updated="run({run:{action:`class_filter_store.set(\'fd_newenrol_filter_instructors\',arr_instructorsfilter.items);queryManager.set(\'offset\',0);calendarClasses.load({},true)`}})"></dmx-array>
                    <dmx-array id="arr_levelsfilter" dmx-on:updated="run({run:{action:`class_filter_store.set(\'fd_newenrol_filter_levels\',arr_levelsfilter.items);queryManager.set(\'offset\',0);calendarClasses.load({},true)`}})"></dmx-array>
                    <section>
                        <p class="fw-900 mb-1">Enrolment Details</p>
                        <div class="row">
                            <div class="col-auto">
                                <div class="form-group mb-3">
                                    <label for="sel_fd_newenrolment_studentpicker" class="form-label col-form-label">Student</label>
                                    <select id="sel_fd_newenrolment_studentpicker" class="form-select w-auto" dmx-bind:options="sc_GET_FAMILY_students.data.students" optiontext="firstName+' '+lastName" optionvalue="uuid" dmx-on:updated="run([{run:{action:`mod_familyDetails_createEnrolment.dd_fd_newenrol_selectedstudent.select(mod_familyDetails_createEnrolment.sel_fd_newenrolment_studentpicker.value)`}},{condition:{if:`mod_familyDetails_createEnrolment.cr_classfilters_studentselected.cb_restrict_level_to_student.checked`,then:{steps:{run:{action:`mod_familyDetails_createEnrolment.arr_levelsfilter.empty();mod_familyDetails_createEnrolment.arr_levelsfilter.add(dd_fd_newenrol_selectedstudent.data.classlevel_uuid)`}}}}}])">
                                        <option value="">Choose Student...</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-auto">
                                <div class="form-group mb-3">
                                    <label class="form-label col-form-label">Enrolment Type</label>
                                    <select id="sel_fd_newenrolment_enrolmenttype" class="form-select border-danger border-2" style="height: 30px;" dmx-on:updated="var_enrolmenttype.setValue(mod_familyDetails_createEnrolment.sel_fd_newenrolment_enrolmenttype.value)">
                                        <option value="permanent">Permanent (Active/Trial)</option>
                                        <option value="temporary">Temporary (Makeup/Casual)</option>
                                        <option value="wait">Waitlist</option>
                                    </select>
                                </div>
                                <div class="dropdown">

                                    <div class="dropdown-menu overpl pt-0 shadow-sm" aria-labelledby="dd_instructorfilter" style="max-height: 250px; overflow-y: scroll !important;">
                                        <a class="dropdown-item p-3 pe-5 fw-600" href="javascript:void(0)" dmx-on:click="var_enrolmenttype.setValue(1)">Active</a>
                                        <a class="dropdown-item p-3 pe-5 fw-600" href="javascript:void(0)" dmx-on:click="var_enrolmenttype.setValue(1)">Trial</a>
                                        <a class="dropdown-item p-3 pe-5 fw-600" href="javascript:void(0)" dmx-on:click="var_enrolmenttype.setValue(1)">Makeup</a>
                                        <a class="dropdown-item p-3 pe-5 fw-600" href="javascript:void(0)" dmx-on:click="var_enrolmenttype.setValue(1)">Casual</a>
                                        <a class="dropdown-item p-3 pe-5 fw-600" href="javascript:void(0)" dmx-on:click="var_enrolmenttype.setValue(1)">Waitlist</a>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </section>
                    <section is="dmx-if" id="cr_classfilters_studentselected" dmx-bind:condition="sel_fd_newenrolment_studentpicker.value">
                        <p class="fw-900 mb-2">Filter Classes</p>
                        <dmx-serverconnect id="sc_classeslist" url="/api/families/GET_CLASSES_NEW_ENROLMENT_FILTERED_list" dmx-param:filter_days="mod_familyDetails_createEnrolment.arr_daysfilter.items" dmx-param:filter_times="mod_familyDetails_createEnrolment.arr_timesfilter.items" dmx-param:filter_levels="mod_familyDetails_createEnrolment.arr_levelsfilter.items" dmx-param:filter_instructors="mod_familyDetails_createEnrolment.arr_instructorsfilter.items" dmx-param:checkavail_max="appSettings.enrol_availability_max_weeks" dmx-param:makeup_max_book_days="appSettings.enrol_makeup_book_ahead_days" dmx-param:startofweek="appSettings.weekstart" dmx-param:avails_type="mod_familyDetails_createEnrolment.sel_fd_newenrolment_enrolmenttype.value" dmx-param:show_full_classes="(mod_familyDetails_createEnrolment.cr_classfilters_studentselected.cr_show_full_classes.cb_showfull_classes.checked ? 1 : 0)"></dmx-serverconnect>
                        <div class="row mb-3 align-items-end">
                            <div class="col-auto">

                                <label class="form-label col-form-label">Days</label>
                                <div class="dropdown">
                                    <button id="btn_daysfilter_dropdown" class="btn mb-0 filter-toggle dropdown-toggle no-caret text-start border" type="button" data-bs-auto-close="outside" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Select Days <i class="fas fa-chevron-down fa-xs fa-fw ms-2"></i></button>
                                    <div class="dropdown-menu">
                                        <a class="dropdown-item p-3 pe-5 fw-600" href="javascript:void(0)" dmx-text="$value" dmx-on:click="arr_daysfilter.addUniq($key)" dmx-hide="arr_daysfilter.items.contains($key)" dmx-repeat:rp_daysfilter="appSettings.days_array">Action</a>
                                    </div>
                                </div>
                            </div>
                            <div class="col-auto">
                                <label class="form-label col-form-label">Times</label>
                                <div class="dropdown">
                                    <button id="btn_timesfilter_dropdown" class="btn mb-0 filter-toggle dropdown-toggle no-caret text-start border" type="button" data-bs-toggle="dropdown" data-bs-auto-close="outside" aria-expanded="false">Select Times<i class="fas fa-chevron-down fa-xs fa-fw ms-2"></i></button>
                                    <div class="dropdown-menu overpl pt-0 shadow-sm" aria-labelledby="dd_timefilter" style="max-height: 250px; overflow-y: scroll !important;">
                                        <a class="dropdown-item p-3 pe-5 fw-600" href="javascript:void(0)" dmx-text="display" dmx-on:click="arr_timesfilter.addUniq($value.stringify())" dmx-hide="arr_timesfilter.items.contains($value.stringify())" dmx-repeat:rp_timesfilter="appSettings.ct_range_array">Action</a>
                                    </div>
                                </div>
                            </div>

                            <div class="col-auto">
                                <label class="form-label col-form-label">Instructors</label>
                                <div class="dropdown">
                                    <button id="dd_instructorfilter" class="btn mb-0 filter-toggle dropdown-toggle no-caret text-start border" type="button" data-bs-toggle="dropdown" data-bs-auto-close="outside" aria-expanded="false">Select Instructors...<i class="fas fa-chevron-down fa-xs fa-fw ms-2"></i></button>

                                    <div class="dropdown-menu overpl pt-0 shadow-sm" aria-labelledby="dd_instructorfilter" style="max-height: 250px; overflow-y: scroll !important;">
                                        <a class="dropdown-item p-3 pe-5 fw-600" href="javascript:void(0)" dmx-text="firstName +' '+lastName.trunc(1,true,'.')" dmx-on:click="arr_instructorsfilter.addUniq(id)" dmx-hide="arr_instructorsfilter.items.contains(id)" dmx-repeat:rp_instructorsfilter="appSettings.instructors">Action</a>
                                    </div>

                                </div>
                            </div>

                            <div class="col-auto">
                                <label class="form-label col-form-label">Class Levels</label>

                                <div class="dropdown">
                                    <button id="dd_levelfilter" class="btn mb-0 filter-toggle dropdown-toggle no-caret text-start border" type="button" data-bs-toggle="dropdown" data-bs-auto-close="outside" aria-expanded="false" dmx-bind:disabled="mod_familyDetails_createEnrolment.cr_classfilters_studentselected.cb_restrict_level_to_student.checked">Select Levels...<i class="fas fa-chevron-down fa-xs fa-fw ms-2"></i></button>
                                    <div class="dropdown-menu overpl pt-0 shadow-sm" aria-labelledby="dd_levelfilter" style="max-height: 250px; overflow-y: scroll !important;">
                                        <a class="dropdown-item p-3 pe-5 fw-600" href="javascript:void(0)" dmx-text="name" dmx-on:click="arr_levelsfilter.addUniq($key)" dmx-hide="arr_levelsfilter.items.contains($key)" dmx-repeat:rp_levelsfilter="appSettings.classLevelsByID">Action</a>
                                    </div>
                                </div>
                            </div>
                            <div class="col ps-0 align-self-stretch d-flex flex-row align-items-end justify-content-start">
                                <div class="form-group mt-2">
                                    <div class="form-check">
                                        <dmx-toggle id="toggle_restrictlevel" dmx-bind:checked="mod_familyDetails_createEnrolment.cr_classfilters_studentselected.cb_restrict_level_to_student.checked" dmx-on:updated="run([{run:{action:`mod_familyDetails_createEnrolment.arr_levelsfilter.empty()`}},{condition:{if:`mod_familyDetails_createEnrolment.cr_classfilters_studentselected.cb_restrict_level_to_student.checked`,then:{steps:{run:{action:`mod_familyDetails_createEnrolment.arr_levelsfilter.empty();mod_familyDetails_createEnrolment.arr_levelsfilter.add(mod_familyDetails_createEnrolment.dd_fd_newenrol_selectedstudent.data.classlevel_uuid)`}}}}}])"></dmx-toggle><input class="form-check-input" type="checkbox" id="cb_restrict_level_to_student" checked>
                                        <label class="form-check-label" for="cb_restrict_level_to_student">Restrict.</label><i class="fas fa-info-circle fa-fw ms-1" dmx-bs-tooltip="'Enabling will restrict class levels to students level. It is recommended to leave this checked to avoid overbookings.'" data-bs-trigger="hover" data-bs-placement="right"></i>
                                    </div>
                                </div>
                            </div>
                            <div class="col d-flex flex-row justify-content-end align-items-end" is="dmx-if" id="cr_show_full_classes" dmx-bind:condition="mod_familyDetails_createEnrolment.sel_fd_newenrolment_enrolmenttype.value=='permanent'">
                                <div class="form-group">
                                    <legend class="col-form-label">Show Full Classes</legend>
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" value="" id="cb_showfull_classes">
                                        <label class="form-check-label" for="cb_showfull_classes" dmx-html="((mod_familyDetails_createEnrolment.cr_classfilters_studentselected.cr_show_full_classes.cb_showfull_classes.checked)?'&lt;span class=&quot;fw-800 text-danger&quot;&gt;SHOW&lt;/span&gt;' : 'Hide')">Show/Hide</label>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <hr class="light my-3">
                        <div class="row mb-3">
                            <div class="col-auto d-flex flex-row justify-content-start align-items-center" dmx-hide="arr_daysfilter.count===0">
                                <p class="mb-0 me-2 fw-900">Days: </p>
                                <p class="badge fs-6 bg-secondary text-white mb-0 fw-500 me-2 clickable user-select-none" dmx-repeat:rp_classpage_filters_days="class_filter_store.data.fd_newenrol_filter_days" dmx-html="'<span class=&quot;text-decoration-underline&quot;>'+appSettings.days_array[$value]+' </span><small class=&quot;text-white-50&quot;>&#10006;</small>'" dmx-on:click="arr_daysfilter.removeAt($index)">Monday <small class="text-white-50">&#10006;</small> </p>
                            </div>
                            <div class="col-auto d-flex flex-row justify-content-start align-items-center" dmx-hide="arr_timesfilter.count===0">
                                <p class="mb-0 me-2 fw-900">Times: </p>
                                <p class="badge fs-6 bg-secondary text-white mb-0 fw-500 me-2 clickable user-select-none" dmx-repeat:rp_classpage_filters_times="class_filter_store.data.fd_newenrol_filter_times" dmx-html="'&lt;span class=&quot;text-decoration-underline&quot;&gt;'+$value.unstringify().display+' &lt;/span&gt;<small class=&quot;text-white-50&quot;>&#10006;</small>'" dmx-on:click="arr_timesfilter.removeAt($index)">3:00 - 4:00 PM <small class="text-white-50">&nbsp;&#10006;</small>
                                </p>
                            </div>
                            <div class="col-auto d-flex flex-row justify-content-start align-items-center" dmx-hide="arr_levelsfilter.count===0">
                                <p class="mb-0 me-2 fw-900">Levels: </p>
                                <p class="badge fs-6 bg-secondary text-white mb-0 fw-500 me-2 clickable user-select-none" dmx-repeat:rp_classpage_filters_levels="class_filter_store.data.fd_newenrol_filter_levels" dmx-on:click="run({condition:{if:`!cb_restrict_level_to_student.checked`,then:{steps:{run:{action:`arr_levelsfilter.removeAt($index)`}}}}})">{{appSettings.classLevelsByID[$value].name}} <small class="text-white-50 ms-1" dmx-hide="cb_restrict_level_to_student.checked">&#10006;</small><i class="fas fa-info-circle fa-fw ms-1 fa-sm" dmx-hide="!cb_restrict_level_to_student.checked" dmx-bs-tooltip="'Cannot remove while class levels restricted.'" data-bs-trigger="hover"></i></p>
                            </div>
                            <div class="col-auto d-flex flex-row justify-content-start align-items-center" dmx-hide="arr_instructorsfilter.count===0">
                                <p class="mb-0 me-2 fw-900">Instructors: </p>
                                <p class="badge fs-6 bg-secondary text-white mb-0 fw-500 me-2 clickable user-select-none" dmx-repeat:rp_classpage_filters_instructors="class_filter_store.data.fd_newenrol_filter_instructors" dmx-html="'<span class=&quot;text-decoration-underline&quot;>'+appSettings.instructorsById[$value].trunc_name+' </span><small class=&quot;text-white-50&quot;>&#10006;</small>'" dmx-on:click="arr_instructorsfilter.removeAt($index)">Sarah J. <small class="text-white-50">&#10006;</small></p>
                            </div>
                        </div>
                        <hr class="light my-3">
                        <div class="row">
                            <div class="col">
                                <p class="text-danger">Note: Maximum of 25 classes are displayed. If you cannot find a class, further refine your filters.</p>
                                <div class="table-responsive">
                                    <table class="table table-hover align-middle bg-white table-bordered" style="">
                                        <thead class="pdl-main-bg">
                                            <tr class="fw-bold align-middle">


                                                <th rowspan="2" class="text-center collapse-cell">Level</th>
                                                <th rowspan="2" class="text-center">Day</th>
                                                <th rowspan="2" class="text-center">Schedule</th>


                                                <th rowspan="2" class="text-center">Instructor</th>
                                                <th rowspan="2" class="text-center">Enrolments</th>
                                                <th colspan="2" dmx-bind:colspan="1" class="text-center" dmx-hide="mod_familyDetails_createEnrolment.sel_fd_newenrolment_enrolmenttype.value=='wait'">Enrolment Date</th>
                                                <th rowspan="2" class="text-center collapse-cell">Enrol</th>
                                            <tr class="fw-450 fst-italic small">
                                                <th class="text-center fw-500" dmx-show="mod_familyDetails_createEnrolment.sel_fd_newenrolment_enrolmenttype.value=='permanent'">Permanent (Active/Trial)</th>
                                                <th class="text-center fw-500" dmx-show="mod_familyDetails_createEnrolment.sel_fd_newenrolment_enrolmenttype.value=='temporary'">Temporary (Makeup/Casual)</th>
                                            </tr>

                                            </tr>
                                        </thead>
                                        <tbody is="dmx-repeat" dmx-generator="bs5table" dmx-bind:repeat="sc_classeslist.data.nextavail.classes" id="rp_classes_table" dmx-hide="sc_classeslist.data.nextavail.classes.length===0">
                                            <tr class="user-select-none">
                                                <td class="d-flex align-items-center text-nowrap fw-900 ps-3 border-end-0">
                                                    <div class="d-block circle position-relative m-1 me-3" dmx-style:background-color="'#'+appSettings.classLevelsByID[classlevel_uuid].colour">
                                                        <p class="d-flex m-0 position-absolute w-100 h-100 align-items-center justify-content-center small fw-700" dmx-style:color.important="'#'+appSettings.classLevelsByID[classlevel_uuid].textcolour" dmx-text="appSettings.classLevelsByID[classlevel_uuid].name.substr(0, 1)" style="line-height: 0;">F</p>
                                                    </div>
                                                    <span class="me-3" dmx-text="appSettings.classLevelsByID[classlevel_uuid].name"></span>
                                                </td>

                                                <td dmx-text="appSettings.days_array[classday]" class="text-center"></td>
                                                <td class="text-nowrap text-center position-relative">
                                                    <div class="d-flex align-items-center justify-content-center">
                                                        <i class="fas pdl-clock me-2" dmx-show="isrunning"></i>
                                                        <span dmx-html="startTimeDisplay.lowercase().replace(' am','').replace(' pm','')+ ' - ' + endTimeDisplay.lowercase().replace(' ','')">11:00 - 11:30AM</span>
                                                    </div>
                                                </td>


                                                <td dmx-text="appSettings.instructorsById[instructor_uuid].trunc_name" class="text-nowrap text-center"></td>
                                                <td dmx-html="'<strong>'+details.total+'</strong> / '+max" class="text-center"></td>
                                                <td class="text-center" dmx-show="mod_familyDetails_createEnrolment.sel_fd_newenrolment_enrolmenttype.value=='permanent'">
                                                    <span dmx-hide="details.nextavailable_permanent == false" dmx-text="(details.nextavailable_permanent !== false &amp;&amp; details.outofrange === false) ? details.nextavailable_permanent.formatDate(appSettings.localization_puddle_dateformat) : ''">Next Open:</span>
                                                    <span class="text-end mb-0 fw-bold text-danger" dmx-show="details.total==max&amp;&amp;details.nextavailable_permanent==false&amp;&amp;details.outofrange===false">FULL</span>
                                                    <span class="text-end mb-0 fw-bold text-danger" dmx-show="details.total>max&amp;&amp;details.outofrange===false">OVERBOOKED</span>
                                                    <span class="mb-0 fst-italic fw-450 small" dmx-show="details.outofrange">Too far in future.</span>
                                                </td>
                                                <td class="text-nowrap text-center" dmx-show="mod_familyDetails_createEnrolment.sel_fd_newenrolment_enrolmenttype.value=='temporary'">
                                                    <p class="mb-0" dmx-repeat:rp_makeupavail_disp="details.makeup_availabilities" dmx-hide="details.makeup_response.code !== 100" dmx-html="date.formatDate(appSettings.localization_puddle_dateformat)">21/01/2022</p>
                                                    <span class="text-end mb-0 fw-bold text-danger" dmx-show="details.makeup_response.code !== 100" dmx-text="details.makeup_response.response">Too far in future.</span>
                                                </td>
                                                <td class="text-center"><button id="btn_startenrolment" class="btn btn-primary text-nowrap" dmx-on:click="run([{run:{action:`mod_familyDetails_createEnrolment.dd_classdetails.select(uuid)`}},{wait:{delay:150}},{run:{action:`mod_familyDetails_createEnrolment.var_pagecount.setValue(2)`}},{run:{action:`mod_familyDetails_createEnrolment.var_newenrol_startdate.setValue(mod_familyDetails_createEnrolment.dd_classdetails.data.details.nextavailable_permanent.formatDate(\'yyyy-MM-dd\'))`}}])" dmx-hide="(details.total==max&amp;&amp;details.nextavailable_permanent==false&amp;&amp;details.outofrange===false)||(details.total>max&amp;&amp;details.outofrange===false)||(mod_familyDetails_createEnrolment.sel_fd_newenrolment_enrolmenttype.value=='wait')"><i class="fas fa-book-open me-2 fa-fw"></i><span dmx-text="'Enrol '+mod_familyDetails_createEnrolment.sel_fd_newenrolment_enrolmenttype.value.capitalize()">Enrol Permanent</span>
                                                    </button>
                                                    <button id="btn_startwaitlist" class="btn btn-waitlist text-nowrap" dmx-show="(details.total==max&amp;&amp;details.nextavailable_permanent==false&amp;&amp;details.outofrange===false)||(details.total>max&amp;&amp;details.outofrange===false)||(mod_familyDetails_createEnrolment.sel_fd_newenrolment_enrolmenttype.value=='wait')"><i class="fas fa-history me-2 fa-fw"></i>Waitlist</button>
                                                </td>

                                            </tr>

                                        </tbody>
                                        <tbody dmx-show="sc_classeslist.data.nextavail.classes.length===0">
                                            <tr>
                                                <td colspan="9" class="text-center p-4">No classes were found. Please adjust your filters and try again.</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </section>
                </section>
                <section id="cr_fd_newenrol_classenrol" is="dmx-if" dmx-bind:condition="mod_familyDetails_createEnrolment.var_pagecount.value==2">
                    <section dmx-animate-enter.duration:300.="fadeIn" class="p-4 bg-white rounded-3 pb-0">
                        <button id="btn_back" class="btn mb-3 btn-primary" dmx-on:click="var_pagecount.setValue(1);sc_fd_newenrol_quote.reset()"><i class="far fa-arrow-alt-circle-left me-1 fa-sm fa-fw"></i>Go Back</button>
                        <div class="row">
                            <div class="col">
                                <h4 class="fw-900 my-4" dmx-html="'<span class=&quot;text-decoration-underline&quot;>'+mod_familyDetails_createEnrolment.dd_fd_newenrol_selectedstudent.data.firstName+' '+mod_familyDetails_createEnrolment.dd_fd_newenrol_selectedstudent.data.lastName+'</span>: '+appSettings.days_array[mod_familyDetails_createEnrolment.dd_classdetails.data.classday]+' - '+mod_familyDetails_createEnrolment.dd_classdetails.data.startTimeDisplay+' '+appSettings.classLevelsByID[mod_familyDetails_createEnrolment.dd_classdetails.data.classlevel_uuid].name+' - '+appSettings.instructorsById[mod_familyDetails_createEnrolment.dd_classdetails.data.instructor_uuid].trunc_name">Enrol Jane Doe into: Sunday - 9:00am Duckling - Freddy K.</h4>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col">

                                <h6 class="fw-900 mb-1">Enrolment Details</h6>
                                <p class="mb-2">Please choose an enrolment type to continue.</p>
                                <div class="row mb-1 pb-2">
                                    <div class="col">
                                        <input type="radio" class="btn-check" name="radio_enrolsearch_enroltype" id="active_enroltype_toggle" autocomplete="off" value="active" dmx-bind:disabled="mod_familyDetails_createEnrolment.var_enrolmenttype.value==='temporary'">
                                        <label class="btn me-2 btn-active-outline" for="active_enroltype_toggle" dmx-on:click="dd_classdetails.var_enroltype.setValue('active')" dmx-hide="mod_familyDetails_createEnrolment.var_enrolmenttype.value==='temporary'"><i class="fas fa-check-circle me-2 fa-fw fa-sm"></i>Active Enrolment</label>

                                        <input type="radio" class="btn-check" name="radio_enrolsearch_enroltype" id="trial_enroltype_toggle" autocomplete="off" value="trial" dmx-bind:disabled="mod_familyDetails_createEnrolment.var_enrolmenttype.value==='temporary'">
                                        <label class="btn me-2 btn-trial-outline" for="trial_enroltype_toggle" dmx-on:click="dd_classdetails.var_enroltype.setValue('trial')" dmx-hide="mod_familyDetails_createEnrolment.var_enrolmenttype.value==='temporary'"><i class="fas fa-question-circle me-2 fa-fw fa-sm text-trial-light"></i>Trial Enrolment</label>

                                        <input type="radio" class="btn-check" name="radio_enrolsearch_enroltype" id="makeup_enroltype_toggle" autocomplete="off" value="makeup" dmx-bind:disabled="mod_familyDetails_createEnrolment.var_enrolmenttype.value!=='temporary'">
                                        <label class="btn me-2 btn-makeup-outline" for="makeup_enroltype_toggle" dmx-on:click="dd_classdetails.var_enroltype.setValue('makeup')" dmx-hide="mod_familyDetails_createEnrolment.var_enrolmenttype.value==='permanent'"><i class="fas fa-arrow-alt-circle-up me-2 fa-fw fa-sm text-makeup"></i>Makeup</label>

                                        <input type="radio" class="btn-check" name="radio_enrolsearch_enroltype" id="casual_enroltype_toggle" autocomplete="off" value="casual" dmx-bind:disabled="mod_familyDetails_createEnrolment.var_enrolmenttype.value!=='temporary'">
                                        <label class="btn me-2 btn-casual-outline" for="casual_enroltype_toggle" dmx-on:click="dd_classdetails.var_enroltype.setValue('casual')" dmx-hide="mod_familyDetails_createEnrolment.var_enrolmenttype.value==='permanent'"><i class="fas fa-bookmark me-2 fa-fw fa-sm text-casual"></i>Casual</label>

                                        <input type="radio" class="btn-check d-none" name="radio_enrolsearch_enroltype" id="waitlist_enroltype_toggle" autocomplete="off" value="waitlist">
                                        <label class="btn me-2 btn-outline-dark d-none" for="waitlist_enroltype_toggle" dmx-on:click="dd_classdetails.var_enroltype.setValue('waitlist')"><i class="fas fa-history me-2 fa-fw fa-sm text-waitlist-light"></i>Waitlist</label>
                                    </div>
                                </div>
                                <div class="row mb-3" dmx-show="mod_familyDetails_createEnrolment.cr_fd_newenrol_classenrol.active_enroltype_toggle.checked||mod_familyDetails_createEnrolment.cr_fd_newenrol_classenrol.trial_enroltype_toggle.checked||mod_familyDetails_createEnrolment.cr_fd_newenrol_classenrol.makeup_enroltype_toggle.checked||mod_familyDetails_createEnrolment.cr_fd_newenrol_classenrol.casual_enroltype_toggle.checked">
                                    <div class="col-auto">

                                        <div class="row" is="dmx-if" id="cr_newtempenrol_dates" dmx-bind:condition="mod_familyDetails_createEnrolment.sel_fd_newenrolment_enrolmenttype.value==='temporary'">
                                            <div class="col">
                                                <div class="form-group">
                                                    <label for="sel_temporary_date" class="form-label col-form-label">Start Date</label>

                                                    <select id="sel_temporary_date" class="form-select" dmx-bind:options="mod_familyDetails_createEnrolment.dd_classdetails.data.details.makeup_availabilities" optiontext="date.formatDate(appSettings.localization_puddle_dateformat)" optionvalue="date.formatDate('yyyy-MM-dd')">
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row" is="dmx-if" id="cr_newenrol_setdate" dmx-bind:condition="mod_familyDetails_createEnrolment.sel_fd_newenrolment_enrolmenttype.value==='permanent'">
                                            <div class="col">
                                                <label for="sel_temporary_date" class="form-label col-form-label">Start Date</label>
                                                <input id="inp_newEnrolStartDate" class="form-control" is="dmx-date-picker" dmx-bind:placeholder="appSettings.localization_dateformat" onkeydown="return false" dmxbind:format="appSettings.localization_dateformat" dmx-bind:mindate="dateAndTime_days.datetime.addDays(-7)" step="7" dmx-bind:maxdate="classesBase.data.nextavail.max_date" dmx-bind:customdates="dd_classdetails.data.details.makeup_availabilities" customdates-start="date.formatDate('yyyy-MM-dd')" customdates-end="date.formatDate('yyyy-MM-dd')" dmx-bind:value="mod_familyDetails_createEnrolment.var_newenrol_startdate.value">
                                            </div>
                                        </div>

                                        <p class="mb-3 mt-2 small fw-600 text-danger"><i class="fas fa-exclamation-triangle me-1 fa-fw fa-sm"></i>Always double check your start date.</p>
                                    </div>
                                    <div class="col-auto">
                                        <label for="inp_searchModal" class="col-form-label float-start">Drop Date</label>
                                        <p class="col-form-label text-danger float-start ms-3 mb-0 clickable user-select-none" style="padding-top: calc(.375rem + 1px); padding-bottom: calc(.375rem + 1px);" dmx-on:click="inp_newEnrolDropDate.setValue(null)"><i class="far fa-times-circle fa-xs me-1"></i>Clear</p>
                                        <input id="inp_newEnrolDropDate" class="form-control mb-1" is="dmx-date-picker" dmx-bind:placeholder="appSettings.localization_dateformat" onkeydown="return false" dmxbind:format="appSettings.localization_dateformat" dmx-bind:mindate="cr_newtempenrol_dates.sel_temporary_date.value" step="7" dmx-bind:value="cr_newtempenrol_dates.sel_temporary_date.value">
                                    </div>
                                    <div class="col-12">
                                        <div class="row" is="dmx-if" id="cr_enrol_active_btn" dmx-bind:condition="mod_familyDetails_createEnrolment.cr_fd_newenrol_classenrol.active_enroltype_toggle.checked">
                                            <div class="col" dmx-animate-leave.duration:150="fadeOutDown" dmx-animate-enter.duration:150.delay:150.delay:150="fadeInUp">
                                                <button id="btn_enrol_active" class="btn btn-primary" dmx-on:click="run([{run:{action:`mod_familyDetails_createEnrolment.toggle_loadingquote.check()`}},{run:{action:`flow_dummyJSON.run({classday: mod_familyDetails_createEnrolment.dd_classdetails.data.classday, classtype_uuid: mod_familyDetails_createEnrolment.dd_classdetails.data.classtype_uuid, baserate: mod_familyDetails_createEnrolment.dd_classdetails.data.baseRate, shortname: mod_familyDetails_createEnrolment.dd_classdetails.data.shortName, firstName: mod_familyDetails_createEnrolment.dd_fd_newenrol_selectedstudent.data.firstName, lastName: mod_familyDetails_createEnrolment.dd_fd_newenrol_selectedstudent.data.lastName, instructor_uuid: mod_familyDetails_createEnrolment.dd_classdetails.data.instructor_uuid, classlevel_uuid: mod_familyDetails_createEnrolment.dd_classdetails.data.classlevel_uuid, startTimeDisplay: mod_familyDetails_createEnrolment.dd_classdetails.data.startTimeDisplay, dropDate: mod_familyDetails_createEnrolment.cr_fd_newenrol_classenrol.inp_newEnrolDropDate.value, isValid: 1, startDate: (mod_familyDetails_createEnrolment.cr_fd_newenrol_classenrol.cr_newenrol_setdate.inp_newEnrolStartDate.value || mod_familyDetails_createEnrolment.cr_fd_newenrol_classenrol.cr_newtempenrol_dates.sel_temporary_date.value), student_uuid: mod_familyDetails_createEnrolment.dd_fd_newenrol_selectedstudent.data.uuid, class_uuid: mod_familyDetails_createEnrolment.dd_classdetails.data.uuid, enrolmentType: 1, uuid: \'dummy\'})`}},{wait:{delay:200}},{run:{action:`mod_familyDetails_createEnrolment.sc_fd_newenrol_quote.load()`}}])">
                                                    Continue Active Enrolment <span class="spinner-border spinner-border-sm ms-2" role="status" dmx-show="mod_familyDetails_createEnrolment.toggle_loadingquote.checked"></span></button>



                                            </div>
                                        </div>
                                        <div class="row" is="dmx-if" id="cr_enrol_trial_btn" dmx-bind:condition="mod_familyDetails_createEnrolment.cr_fd_newenrol_classenrol.trial_enroltype_toggle.checked">
                                            <div class="col" dmx-animate-enter.duration:150.delay:150="fadeInUp" dmx-animate-leave.duration:150="fadeOutDown"><button id="btn_enrol_trial" class="btn btn-primary" dmx-bind:disabled="!mod_familyDetails_createEnrolment.cr_fd_newenrol_classenrol.casual_enroltype_toggle.checked&amp;&amp;!mod_familyDetails_createEnrolment.cr_fd_newenrol_classenrol.makeup_enroltype_toggle.checked&amp;&amp;!mod_familyDetails_createEnrolment.cr_fd_newenrol_classenrol.trial_enroltype_toggle.checked&amp;&amp;!mod_familyDetails_createEnrolment.cr_fd_newenrol_classenrol.active_enroltype_toggle.checked">
                                                    Create Trial Enrolment <span class="spinner-border spinner-border-sm ms-2" role="status" dmx-show="mod_familyDetails_createEnrolment.toggle_loadingquote.checked"></span></button></div>
                                        </div>
                                        <div class="row" is="dmx-if" id="cr_enrol_casual_btn" dmx-bind:condition="mod_familyDetails_createEnrolment.cr_fd_newenrol_classenrol.casual_enroltype_toggle.checked">
                                            <div class="col" dmx-animate-enter.duration:150.delay:150="fadeInUp" dmx-animate-leave.duration:150="fadeOutDown"><button id="btn_enrol_casual" class="btn btn-primary" dmx-on:click="run([{assign:{value:`true`,name:'var_continue'}},{condition:{if:`(mod_familyDetails_createEnrolment.var_enrolmenttype.value==\'temporary\')&amp;&amp;!mod_familyDetails_createEnrolment.cr_fd_newenrol_classenrol.inp_newEnrolDropDate.value`,then:{steps:[{run:{action:`flow_swal_confirm.run({alerticon: \'warning\', alerttitle: \'Drop Date Not Entered\', showdeny: true, denytext: \'Go Back\', showcancel: false, confirmtext: \'Continue Anyway\', message: \'Makeup enrolments are meant to be &lt;strong&gt;TEMPORARY&lt;/strong&gt;. Without a drop date, this enrolment will never expire.&lt;br&gt;&lt;br&gt;Are you sure you want to continue?\'})`}},{condition:{if:`!flow_swal_confirm.data.confirm`,then:{steps:{assign:{value:`false`,name:'var_continue'}}}}}]}}},{condition:{if:`var_continue==true`,then:{steps:[{comment:{msg:'Dummy Enrol Load'}},{run:{action:`flow_dummyJSON.run({classday: mod_familyDetails_createEnrolment.dd_classdetails.data.classday, classtype_uuid: mod_familyDetails_createEnrolment.dd_classdetails.data.classtype_uuid, baserate: mod_familyDetails_createEnrolment.dd_classdetails.data.baseRate, shortname: mod_familyDetails_createEnrolment.dd_classdetails.data.shortName, firstName: mod_familyDetails_createEnrolment.dd_fd_newenrol_selectedstudent.data.firstName, lastName: mod_familyDetails_createEnrolment.dd_fd_newenrol_selectedstudent.data.lastName, instructor_uuid: mod_familyDetails_createEnrolment.dd_classdetails.data.instructor_uuid, classlevel_uuid: mod_familyDetails_createEnrolment.dd_classdetails.data.classlevel_uuid, startTimeDisplay: mod_familyDetails_createEnrolment.dd_classdetails.data.startTimeDisplay, dropDate: mod_familyDetails_createEnrolment.cr_fd_newenrol_classenrol.inp_newEnrolDropDate.value, isValid: 1, startDate: (mod_familyDetails_createEnrolment.cr_fd_newenrol_classenrol.cr_newenrol_setdate.inp_newEnrolStartDate.value || mod_familyDetails_createEnrolment.cr_fd_newenrol_classenrol.cr_newtempenrol_dates.sel_temporary_date.value), student_uuid: mod_familyDetails_createEnrolment.dd_fd_newenrol_selectedstudent.data.uuid, class_uuid: mod_familyDetails_createEnrolment.dd_classdetails.data.uuid, enrolmentType: 5, uuid: \'dummy\'})`}},{run:{action:`mod_familyDetails_createEnrolment.sc_fd_newenrol_quote.load({})`}}]}}}])">
                                                    Continue Casual Enrolment <span class="spinner-border spinner-border-sm ms-2" role="status" dmx-show="mod_familyDetails_createEnrolment.toggle_loadingquote.checked"></span></button></div>
                                        </div>
                                        <div class="row" is="dmx-if" id="cr_enrol_makeup_btn" dmx-bind:condition="mod_familyDetails_createEnrolment.cr_fd_newenrol_classenrol.makeup_enroltype_toggle.checked">
                                            <div class="col" dmx-animate-enter.duration:150.delay:150="fadeInUp" dmx-animate-leave.duration:150="fadeOutDown"><button id="btn_enrol_makeup" class="btn btn-primary" dmx-on:click="run({condition:{if:`(mod_familyDetails_createEnrolment.var_enrolmenttype.value==\'temporary\')&amp;&amp;!mod_familyDetails_createEnrolment.cr_fd_newenrol_classenrol.inp_newEnrolDropDate.value`,then:{steps:[{run:{action:`flow_swal_confirm.run({alerticon: \'warning\', alerttitle: \'Drop Date Not Entered\', showdeny: true, denytext: \'Go Back\', showcancel: false, confirmtext: \'Continue Anyway\', message: \'Casual enrolments are meant to be &lt;strong&gt;TEMPORARY&lt;/strong&gt;. Without a drop date, this enrolment will never expire and the family &lt;span class=&quot;text-decoration-underline&quot;&gt;will be charged for multiple classes in the future&lt;/span&gt;.&lt;br&gt;&lt;br&gt;Are you sure you want to continue?\'})`}},{condition:{if:`flow_swal_confirm.data.confirm`,then:{steps:{alert:{message:'Continued'}}}}}]}}})">
                                                    Create Makeup Enrolment <span class="spinner-border spinner-border-sm ms-2" role="status" dmx-show="mod_familyDetails_createEnrolment.toggle_loadingquote.checked"></span></button></div>
                                        </div>

                                    </div>
                                </div>

                            </div>
                        </div>
                    </section>
                </section>
                <section>
                    <dmx-toggle id="toggle_loadingquote"></dmx-toggle>
                    <dmx-serverconnect id="sc_fd_newenrol_quote" url="/api/classes/enrolments/GENERATE_QUOTE_enrolment" dmx-param:enrolmentType="((mod_familyDetails_createEnrolment.cr_fd_newenrol_classenrol.active_enroltype_toggle.checked) ? 1 : (mod_familyDetails_createEnrolment.cr_fd_newenrol_classenrol.trial_enroltype_toggle.checked) ? 3 : (mod_familyDetails_createEnrolment.cr_fd_newenrol_classenrol.makeup_enroltype_toggle.checked) ? 2 : 5)" dmx-param:dropDate="mod_familyDetails_createEnrolment.cr_fd_newenrol_classenrol.inp_newEnrolDropDate.value" dmx-param:student_uuid="mod_familyDetails_createEnrolment.dd_fd_newenrol_selectedstudent.data.uuid" dmx-param:startdate="(mod_familyDetails_createEnrolment.cr_fd_newenrol_classenrol.cr_newtempenrol_dates.sel_temporary_date.value||mod_familyDetails_createEnrolment.cr_fd_newenrol_classenrol.cr_newenrol_setdate.inp_newEnrolStartDate.value)" dmx-param:class_uuid="mod_familyDetails_createEnrolment.dd_classdetails.data.uuid" dmx-param:family_uuid="query.familyid" dmx-param:enabledummyenrol="1" dmx-param:dummyenroljson="flow_dummyJSON.data.dummyJSON" noload dmx-on:done="toggle_loadingquote.uncheck()"></dmx-serverconnect>
                    <div class="row g-0" is="dmx-if" id="cr_quotedetails" dmx-bind:condition="mod_familyDetails_createEnrolment.sc_fd_newenrol_quote.data">
                        <div class="col p-4 bg-white rounded-3">
                            <h4 class="fw-900">New/Updated Family Charge Details</h4>
                            <div class="table-responsive">
                                <table class="table table-bordered align-middle big-small">
                                    <thead class="pdl-main-bg">
                                        <tr>
                                            <th scope="col"></th>
                                            <th scope="col">
                                                Charge Period
                                            </th>
                                            <th scope="col">
                                                Grand Total
                                            </th>
                                            <th scope="col">
                                                Discounts<i class="fas fa-question-circle ms-2 clickable user-select-none fa-sm" dmx-bs-popover="'Includes enrolment, family and holding fee discounts.'" data-bs-trigger="hover" data-bs-placement="right" data-bs-html="true" dmx-bind:popover-title="'All Discounts'"></i>
                                            </th>
                                            <th scope="col">
                                                Base Rate<i class="fas fa-question-circle ms-2 clickable user-select-none fa-sm" dmx-bs-popover="'The base rate is the price of all enrolments before enrolment discounts and family discounts have been applied.'" data-bs-trigger="hover" data-bs-placement="right" data-bs-html="true" dmx-bind:popover-title="'Base Rate'"></i>
                                            </th>
                                            <th scope="col">
                                                * Charge Date
                                            </th>
                                            <th scope="col">
                                                * Due Date
                                            </th>
                                        </tr>
                                    </thead>
                                    <tbody is="dmx-repeat" id="rp_ne_familycharges" dmx-bind:repeat="mod_familyDetails_createEnrolment.sc_fd_newenrol_quote.data.exec_tuitioncalc.repeat">
                                        <tr>
                                            <td class="collapse-cell">
                                                <dmx-toggle id="toggle_open_details"></dmx-toggle>
                                                <button id="btn_showQuoteDetails" class="btn text-nowrap btn-secondary" style="width: 95px !important;" dmx-on:click="run([{condition:{if:`calculate_charges.existingcharge.chargeexists`,then:{steps:{run:{action:`mod_familyDetails_createEnrolment.oc_familydetails_charge_details.sc_GET_EXISTING_CHARGE_detail.load({charge_uuid: calculate_charges.existingcharge.details.uuid})`}}}}},{run:{action:`dd_familydetails_charge_details.select(calculate_charges.chargefor_date)`}},{run:{action:`mod_familyDetails_createEnrolment.oc_familydetails_charge_details.show()`}}])"><i class="fas fa-plus-circle fa-sm fa-fw me-1"></i>Details
                                                </button> {{dd_familydetails_charge_details.data === null}}
                                            </td>
                                            <td>
                                                <p class="mb-0 fw-550" dmx-html="calculate_charges.chargefor+(calculate_charges.monthlychargeexists.exists == true &amp;&amp; calculate_charges.monthlychargeexists.status == 200 ? '<small class=&quot;fst-italic lh-1 text-danger fw-400&quot;>Monthly charge already exists. <br> Created: '+calculate_charges.monthlychargeexists.created.formatDate('yyyy-MM-dd')+'.</small>': calculate_charges.monthlychargeexists.exists == true &amp;&amp; calculate_charges.monthlychargeexists.status == 409 ? '<small class=&quot;lh-1 fst-italic text-danger fw-400&quot;><i class=&quot;bi-exclamation-octagon-fill text-danger me-2&quot;></i>'+calculate_charges.monthlychargeexists.chargeid+'</small>':'')">April 2022</p>
                                            </td>
                                            <td>
                                                <p class="mb-0 fw-550" dmx-text="calculate_charges.tuitiontotals.enrolgrandtotal.formatCurrency(localization.data.localization.currrency_symbol, appSettings.localization_num_separator, appSettings.localization_num_delimeter, 2)">$77.50</p>
                                            </td>
                                            <td>
                                                <p class="mb-0 fw-500 text-ledger" dmx-text="((calculate_charges.tuitiontotals.multienrol_discount + calculate_charges.tuitiontotals.family_discount) + calculate_charges.tuitiontotals.holding_fee).round(2).formatCurrency(localization.data.localization.currrency_symbol, appSettings.localization_num_separator, appSettings.localization_num_delimeter, 2)">$22.50</p>
                                            </td>
                                            <td>
                                                <p class="mb-0 text-muted" dmx-text="calculate_charges.tuitiontotals.baseRate.formatCurrency(localization.data.localization.currrency_symbol, appSettings.localization_num_separator, appSettings.localization_num_delimeter, 2)">$100.00</p>
                                            </td>
                                            <td><input id="inp_chargeDate" name="chargedate" type="text" class="form-control form-control-plaintext text-decoration-underline clickable" is="dmx-date-picker" dmx-bind:format="appSettings.localization_dateformat" dmx-bind:placeholder="appSettings.localization_dateformat" dmx-bind:value="calculate_charges.existingcharge.chargeexists ? calculate_charges.existingcharge.details.chargeDate.formatDate('yyyy-MM-dd') : dateAndTime_days.datetime.formatDate('yyyy-MM-dd')" placeholder="dd/MM/yyyy">
                                            </td>
                                            <td dmx-class:border-2="!inp_dueDate.value" dmx-class:border-danger="!inp_dueDate.value"><input id="inp_dueDate" name="duedate" type="text" class="form-control form-control-plaintext text-decoration-underline clickable" is="dmx-date-picker" dmx-bind:format="appSettings.localization_dateformat" dmx-bind:placeholder="appSettings.localization_dateformat" dmx-bind:value="calculate_charges.existingcharge.chargeexists ? calculate_charges.existingcharge.details.dueDate.formatDate('yyyy-MM-dd') : ''" placeholder="dd/mm/yyyy" required="" data-msg-required="Due date is required." dmx-bind:mindate="inp_chargeDate.value"></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </section>


            </div>
            <div class="modal-footer border-top">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>